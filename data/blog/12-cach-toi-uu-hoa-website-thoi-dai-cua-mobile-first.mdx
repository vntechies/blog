---
title: 12 cÃ¡ch tá»‘i Æ°u hoÃ¡ website - thá»i Ä‘áº¡i cá»§a mobile-first
date: '2020-12-21'
tags: ['web development', 'web optimize']
draft: false
authors: ['default', 'mau']
images: ['/static/images/ogps/web-optimize.png']
summary: 'Báº¡n nghÄ© ráº±ng cáº£i thiá»‡n vÃ  tá»‘i Æ°u hoÃ¡ tá»‘c Ä‘á»™ website lÃ  khÃ´ng quan trá»ng? BÃ¢y giá» lÃ  2020, hÃ£y nghÄ© láº¡i!'
---

<TOCInline toc={props.toc} asDisclosure />

## TL;DR

- Load-time cá»§a website áº£nh hÆ°á»Ÿng ráº¥t lá»›n Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng, tá»« Ä‘Ã³ cÅ©ng áº£nh hÆ°á»Ÿng Ä‘áº¿n lá»£i nhuáº­n, vá»‹ trÃ­ trÃªn google vÃ  tá»‰ lá»‡ quay láº¡i trang.
- QuÃ¡ trÃ¬nh tá»‘i Æ°u hoÃ¡ load-time cá»§a website cÃ³ ráº¥t nhiá»u bÆ°á»›c, Ä‘Ã²i há»i nhiá»u cÃ´ng sá»©c nhÆ°ng Ä‘Ã¡ng Ä‘á»ƒ Ä‘Æ°á»£c quan tÃ¢m.
- Keep everything simple at first, hÃ£y cá»‘ gáº¯ng phÃ¡t triá»ƒn á»©ng dá»¥ng web cÃ³ tÃ¢m, khÃ´ng sá»­ dá»¥ng nhá»¯ng gÃ¬ khÃ´ng cáº§n, tÆ° duy mobile-first vÃ  trong sÃ¡ng nháº¥t cÃ³ thá»ƒ.

## Táº¡i sao pháº£i tá»‘i Æ°u hoÃ¡ website?

_Theo [sá»‘ liá»‡u cung cáº¥p bá»Ÿi google](https://www.thinkwithgoogle.com/marketing-resources/data-measurement/mobile-page-speed-new-industry-benchmarks/)_

![](/static/images/assets/ltfWITVaamwum4CC.jpg)

- User facts:
  - **47%** ngÆ°á»i dÃ¹ng muá»‘n trang web load **dÆ°á»›i 2 giÃ¢y** vÃ  **40%** sáº½ bá» cuá»™c náº¿u trang web máº¥t **trÃªn 3 giÃ¢y** Ä‘á»ƒ load.
  - **79%** ngÆ°á»i dÃ¹ng sáº½ khÃ´ng ghÃ© thÄƒm láº¡i má»™t website cÃ³ performance tá»“i.
  - **52%** ngÆ°á»i dÃ¹ng cho ráº±ng website load nhanh áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n Ä‘á»™ trung thÃ nh cá»§a há».
  - **44%** ngÆ°á»i dÃ¹ng than phiá»n vá» tá»‘c Ä‘á»™ web vá»›i báº¡n cá»§a há».
  - **1 giÃ¢y** tÄƒng lÃªn trong load-time giáº£m **16%** Ä‘á»™ hÃ i lÃ²ng cá»§a ngÆ°á»i dÃ¹ng.

![](/static/images/assets/pxvo1NJb9KnMlUCu.png)

- Website facts:
  - **79%** cÃ³ kÃ­ch thÆ°á»›c trÃªn 1MB, **53%** trÃªn 2MB vÃ  **23%** trÃªn 4MB.
  - Mobile load-time Ä‘Ã£ **giáº£m 7 giÃ¢y** nhÆ°ng váº«n tá»‘n khoáº£ng **15 giÃ¢y**, **53%** websites tá»‘n hÆ¡n **3 giÃ¢y** Ä‘á»ƒ hiá»ƒn thá»‹.
  - Mobile traffic chiáº¿m hÆ¡n má»™t ná»­a web traffic trÃªn toÃ n tháº¿ giá»›i, nhÆ°ng tá»· lá»‡ chuyá»ƒn Ä‘á»•i thÃ nh lá»£i nhuáº­n láº¡i tháº¥p hÆ¡n trÃªn cÃ¡c thiáº¿t bá»‹ mÃ¡y tÃ­nh.
    â†’ **speed equals revenue**
  - **70%** landing page máº¥t **hÆ¡n 5 giÃ¢y** Ä‘á»ƒ hiá»ƒn thá»‹.
  - Google sá»­ dá»¥ng má»™t deep neural network vá»›i Ä‘á»™ chÃ­nh xÃ¡c 90% Ä‘á»ƒ cho ra káº¿t quáº£ sau:
    - **giáº£m load-time Ä‘Æ°á»£c 10 giÃ¢y**, tá»· lá»‡ ngÆ°á»i dÃ¹ng tiáº¿p tá»¥c sá»­ dá»¥ng website **tÄƒng 123%**
    - ngÆ°á»£c láº¡i, sá»‘ lÆ°á»£ng elements trÃªn trang web **tÄƒng tá»« 400 lÃªn 6000**, tá»· lá»‡ chuyá»ƒn Ä‘á»•i thÃ nh lá»£i nhuáº­n **giáº£m 95%**
      â†’ **faster is better and less is more**
  - Thá»­ nghiá»‡m thá»±c táº¿:
    - Walmart:
      - Má»—i **1 giÃ¢y** load-time giáº£m, sá»‘ lÆ°á»£ng Ä‘áº·t hÃ ng **tÄƒng 2%**
      - Má»—i **100ms** load-time giáº£m, lá»£i nhuáº­n tÄƒng **1%**
      - Tá»‰ lá»‡ Ä‘áº·t hÃ ng cÃ³ thá»ƒ **giáº£m 25%** vá»›i má»—i **1 giÃ¢y** tÄƒng trong load-time.
    - Amazon A/B Test:
      - Chá»‰ **100ms load-time** cÃ³ thá»ƒ khiáº¿n lá»£i nhuáº­n **giáº£m Ä‘Ã¡ng ká»ƒ**.
    - Google:
      - Traffic **giáº£m 20%** náº¿u load-time tÄƒng thÃªm **0.5 giÃ¢y**
      - Google Ä‘Ã£ rank cÃ¡c website theo [mobile-first index](https://searchengineland.com/finally-going-mobile-friendly-collision-course-googles-mobile-first-index-case-study-265227), tá»‘c Ä‘á»™ load trang trÃªn di Ä‘á»™ng sáº½ áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n káº¿t quáº£ index trÃªn Google search engine.

## SPEED DOES MATTER

![](/static/images/assets/xM14N65sTTJpIBaq.jpg)

Load-time tÄƒng 1 giÃ¢y:

- **Giáº£m 11%** lÆ°á»£ng pageviews
- **Giáº£m 16%** sá»± hÃ i lÃ²ng cá»§a khÃ¡ch hÃ ng
- **Giáº£m 7%** lá»£i nhuáº­n

á» Viá»‡t Nam, website cá»§a [Tháº¿ giá»›i di Ä‘á»™ng](https://www.thegioididong.com/) Ä‘Æ°á»£c giao KPI hiá»ƒn thá»‹ dÆ°á»›i 3000ms, cÃ²n [tiki vÃ  Ä‘áº·c biá»‡t lÃ  sendo cÃ³ váº» khÃ´ng quan tÃ¢m Ä‘áº¿n](https://toidicodedao.com/2018/04/03/tiki-sendo-tai-trang-cham-sen-bo/) viá»‡c nÃ y láº¯m. CÃ¡c báº¡n cÃ³ thá»ƒ dá»… dÃ ng tháº¥y tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng á»Ÿ Ä‘Ã¢u tá»‘t hÆ¡n, á»Ÿ Ä‘Ã¢u má»i ngÆ°á»i mua Ä‘á»“ nhiá»u hÆ¡n.

DÃ¹ sao thÃ¬ trong tÆ°Æ¡ng lai, cÃ¡c website cháº¯c cháº¯n sáº½ pháº£i Ä‘á»ƒ Ã½ Ä‘áº¿n viá»‡c optimize webservice. ÄÃ¢y vá»«a lÃ  cÆ¡ há»™i vÃ  cÅ©ng lÃ  thÃ¡ch thá»©c vá»›i cÃ¡c láº­p trÃ¬nh viÃªn. Liá»‡u táº¥t cáº£ nhá»¯ng lÃ½ do trÃªn Ä‘Ã£ khiáº¿n cÃ¡c báº¡n pháº£i ngá»“i vÃ o bÃ n vÃ  bá» thá»i gian ra lÃ m má»™t website cháº¡y nhanh hÆ¡n 1-2 giÃ¢y?

Long story short:

> **HÃ£y lÃ m trang cá»§a báº¡n cháº¡y tháº­t nhanh trÃªn cÃ¡c thiáº¿t bá»‹ di Ä‘á»™ng vÃ  báº¯t Ä‘áº§u tÆ° duy theo hÆ°á»›ng mobile-first.**

CÃ¹ng nhÃ¬n láº¡i má»™t chÃºt quÃ¡ trÃ¬nh vÃ o má»™t trang web cá»§a ngÆ°á»i dÃ¹ng theo má»™t flow Ä‘Æ¡n giáº£n:

![](/static/images/assets/jQyWIfh6TnBtl1wi.jpg)

1. ngÆ°á»i dÃ¹ng nháº­p Ä‘á»‹a chá»‰ web â†’ chuyá»ƒn Ä‘áº¿n máº¡ng Internet
2. DNS server (Domain Name Service server) chuyá»ƒn tá»« URL thÃ nh Ä‘á»‹a chá»‰ IP â†’ ã€€ trá» Ä‘áº¿n server cÃ³ IP yÃªu cáº§u
3. server nháº­n request, xá»­ lÃ½ request
4. chuyá»ƒn láº¡i response cho ngÆ°á»i dÃ¹ng â†’ browser hiá»ƒn thá»‹ káº¿t quáº£.

Tin tá»‘t lÃ  chÃºng ta cÃ³ thá»ƒ optimize trang web á»Ÿ táº¥t cáº£ cÃ¡c bÆ°á»›c cÃ²n tin xáº¥u lÃ  á»Ÿ má»—i bÆ°á»›c, thá»i gian cáº£i thiá»‡n cÃ³ thá»ƒ chá»‰ Ä‘Æ°á»£c tÃ­nh báº±ng ms (1/100 giÃ¢y ğŸ˜…). CÃ³ nÃªn thá»±c sá»± quan tÃ¢m?

- Náº¿u trang web cá»§a báº¡n lÃ  má»™t blog cÃ¡ nhÃ¢n, khÃ´ng cÃ³ giÃ¡ trá»‹ kiáº¿m tiá»n, cÃ³ &lt; 50 ngÆ°á»i truy cáº­p cÃ¹ng lÃºc (nhÆ° blog nÃ y) thÃ¬ viá»‡c optimize khÃ´ng mang láº¡i nhiá»u giÃ¡ trá»‹.
- Báº¡n kiáº¿m tiá»n tá»« trang web cá»§a báº¡n vÃ  cÃ³ trung bÃ¬nh vÃ i nghÃ¬n hoáº·c vÃ i trÄƒm nghÃ¬n lÆ°á»£t truy cáº­p cÃ¹ng lÃºc. NgoÃ i lÃ½ do vá» lá»£i nhuáº­n, náº¿u khÃ´ng optimize web service, server cÃ³ thá»ƒ bá»‹ quÃ¡ táº£i do requests cá»§a khÃ¡ch hÃ ng â†’ bottle neck â†’ load-time kÃ©o dÃ i, tháº­m chÃ­ out of service. Thay vÃ¬ bá» tiá»n mua server khá»§ng hÆ¡n, hÃ£y bá» chÃºt thá»i gian Ä‘á»ƒ sáº¯p xáº¿p vÃ  thiáº¿t káº¿ láº¡i service Ä‘á»ƒ Ä‘em láº¡i performance á»•n Ä‘á»‹nh vá»›i chi phÃ­ ráº» hÆ¡n.

## LÃ m tháº¿ nÃ o?

- Äáº§u tiÃªn hÃ£y xem website cá»§a báº¡n Ä‘ang cÃ³ váº¥n Ä‘á» gÃ¬ báº±ng [cÃ´ng cá»¥ cá»§a Pagespeed cá»§a google](https://developers.google.com/speed/pagespeed/insights/)
- Tham kháº£o cÃ¡c rules cá»§a google cho viá»‡c tÄƒng tá»‘c Ä‘á»™ load trang:
  - [Háº¡n cháº¿ viá»‡c redirect táº¡i landing page](https://developers.google.com/speed/docs/insights/AvoidRedirects)
  - [Enable compression](https://developers.google.com/speed/docs/insights/EnableCompression)
  - [Cáº£i thiá»‡n tá»‘c Ä‘á»™ pháº£n há»“i cá»§a server](https://developers.google.com/speed/docs/insights/Server)
  - [Táº­n dá»¥ng bá»™ nhá»› cache cá»§a browser](https://developers.google.com/speed/docs/insights/LeverageBrowserCaching)
  - [Tá»‘i giáº£n hoÃ¡ cÃ¡c tÃ i nguyÃªn](https://developers.google.com/speed/docs/insights/MinifyResources)
  - [Tá»‘i Æ°u hiá»ƒn thá»‹ áº£nh](https://developers.google.com/speed/docs/insights/OptimizeImages)
  - [Tá»‘i Æ°u hoÃ¡ viá»‡c load CSS](https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery)
  - [Æ¯u tiÃªn cÃ¡c ná»™i dung cáº§n Ä‘Æ°á»£c hiá»ƒn thá»‹ trÆ°á»›c](https://developers.google.com/speed/docs/insights/PrioritizeVisibleContent)
  - [XoÃ¡ bá» cÃ¡c Javascript gÃ¢y ra render-blocking](https://developers.google.com/speed/docs/insights/BlockingJS)

[Sau táº¥t cáº£](https://www.youtube.com/watch?v=wHF3Jv6Gk2o), google lÃ  cÃ´ng cá»¥ tÃ¬m kiáº¿m lá»›n nháº¥t tháº¿ giá»›i, lÃ m má»i thá»© theo chuáº©n cá»§a há» cháº¯c cháº¯n khÃ´ng pháº£i má»™t lá»±a chá»n tá»“i.

Äá»ƒ Ä‘áº§y Ä‘á»§ hÆ¡n, mÃ¬nh sáº½ thÃªm má»™t sá»‘ phÆ°Æ¡ng phÃ¡p vÃ  chia thÃ nh 4 loáº¡i tÆ°Æ¡ng á»©ng vá»›i tá»«ng giai Ä‘oáº¡n khi ngÆ°á»i dÃ¹ng truy cáº­p website.

## Loáº¡i 1: User â†’ Internet

HoÃ n toÃ n náº±m ngoÃ i kháº£ nÄƒng cá»§a chÃºng ta, tuy nhiÃªn váº«n cÃ³ thá»ƒ Ä‘áº£m báº£o viá»‡c khÃ¡c hÃ ng cÃ³ Ä‘Æ°á»£c tráº£i nghiá»‡m Ä‘á»§ tá»‘t vá»›i tá»‘c Ä‘á»™ máº¡ng cá»±c cháº­m báº±ng viá»‡c [xÃ¢y dá»±ng progressive web app vÃ  sá»­ dá»¥ng service-worker](https://qmau.me/blog/post/progressive-web-apps-qmau-me-cho-ios) cho trang web cá»§a báº¡n.

## Loáº¡i 2: Internet â†’ Server

### 1. Sá»­ dá»¥ng DNS server

![PhÃ¢n tÃ­ch tá»‘c Ä‘á»™ cá»§a cÃ¡c DNS provider](/static/images/assets/jAOAsuDFTd9l0zPK.jpg)

Viá»‡c chuyá»ƒn tá»« URL sang Ä‘á»‹a chá»‰ IP server do DNS server Ä‘áº£m nháº­n, vÃ  nÃ³ cÅ©ng chá»‰ lÃ  má»™t mÃ¡y tÃ­nh, nhanh cháº­m khÃ¡c nhau. CÃ¡c dá»‹ch vá»¥ cung cáº¥p host thÆ°á»ng cÅ©ng sáº½ cÃ³ kÃ¨m theo dá»‹ch vá»¥ cung cáº¥p DNS, tuy nhiÃªn tá»‘c Ä‘á»™ cÃ³ thá»ƒ khÃ¡c nhau â†’ tá»‘c Ä‘á»™ load trang cÅ©ng bá»‹ phá»¥ thuá»™c.

**CÃ¡ch kháº¯c phá»¥c**

- Äá»ƒ tiáº¿t kiá»‡m Ä‘Æ°á»£c khoáº£ng **20-30ms** load-time, báº¡n nÃªn cÃ¢n nháº¯c chuyá»ƒn qua dÃ¹ng DNS server cá»§a má»™t sá»‘ nhÃ  cung cáº¥p khÃ¡c.
- Má»™t sá»‘ nhÃ  cung cáº¥p dá»‹ch vá»¥ DNS (nhÆ° cloudflare) cho phÃ©p báº¡n sá»­ dá»¥ng DNS service miá»…n phÃ­, tuy nhiÃªn hÃ£y tÃ¬m hiá»ƒu xem á»Ÿ khu vá»±c Ä‘á»‹a lÃ½ mÃ  website cá»§a báº¡n hay Ä‘Æ°á»£c sá»­ dá»¥ng [DNS nÃ o cÃ³ tá»‘c Ä‘á»™ nhanh nháº¥t](https://www.dnsperf.com/).

### 2. Sá»­ dá»¥ng CDN

![PhÃ¢n tÃ­ch tá»‘c Ä‘á»™ cá»§a cÃ¡c CDN provider](/static/images/assets/luVNJqudPakH-jpc.jpg)

Content Delivery Network (CDN) lÃ  há»‡ thá»‘ng cÃ¡c edge servers Ä‘Æ°á»£c Ä‘áº·t táº¡i cÃ¡c vá»‹ trÃ­ Ä‘á»‹a lÃ½ khÃ¡c nhau Ä‘á»ƒ cÃ³ thá»ƒ truyá»n táº£i ná»™i dung tá»« má»™t origin á»Ÿ khoáº£ng cÃ¡ch xa nhanh chÃ³ng hÆ¡n nhá» cÆ¡ cháº¿ cache.

Thay vÃ¬ Ä‘áº¿n táº­n server (origin, á»Ÿ xa) Ä‘á»ƒ láº¥y cÃ¡c tÃ i nguyÃªn thÃ¬ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ láº¥y ngay táº¡i CDN (distribution, á»Ÿ gáº§n), chÃ­nh vÃ¬ tháº¿ load-time sáº½ Ä‘Æ°á»£c giáº£m Ä‘Ã¡ng ká»ƒ.

Äá»ƒ hiá»ƒu rÃµ hÆ¡n nhá»¯ng lá»£i Ã­ch cá»§a viá»‡c sá»­ dá»¥ng CDN báº¡n cÃ³ thá»ƒ Ä‘á»c [bÃ i viáº¿t vÃ´ cÃ¹ng cÃ³ tÃ¢m cá»§a sempai Äinh HoÃ ng Long vá» CDN](https://viblo.asia/p/su-dung-cdn-de-giam-tai-cho-server-ymwGXOxoM4p1).

Theo [cdnperf.com](https://www.cdnperf.com/), tÃ­nh Ä‘áº¿n thá»i Ä‘iá»ƒm nÃ y JSDELIVR Ä‘ang dáº«n Ä‘áº§u trong viá»‡c cung cáº¥p dá»‹ch vá»¥ CDN trÃªn toÃ n cáº§u. á» chÃ¢u Ã, vá»‹ trÃ­ quÃ¡n quÃ¢n thuá»™c vá» CDNetworks. Cloudflare CDN, Azure vÃ  CloudFront cá»§a AWS cÅ©ng lá»p top 10.

## Loáº¡i 3: Server

### 3. Hosting

![](/static/images/assets/yvVGAtFtpTp2qnbr.png)

Thá»i Ä‘áº¡i cá»§a cloud computing, cÃ¡c service háº§u háº¿t Ä‘Æ°á»£c Ä‘Æ°a lÃªn mÃ¢y. Viá»‡c chá»n má»™t hosting service phÃ¹ há»£p vá»›i nhu cáº§u cá»§a trang web cÅ©ng lÃ  má»™t yáº¿u tá»‘ quan trá»ng áº£nh hÆ°á»Ÿng Ä‘áº¿n tá»‘c Ä‘á»™ cá»§a trang web.

- Nhu cáº§u nhá» â†’ ã€€ shared hosting.
- Nhu cáº§u vá»«a pháº£i â†’ VPS hosting.
- Nhu cáº§u lá»›n â†’ Dedicated server.

Náº¿u cÃ³ thá»ƒ, hÃ£y tham kháº£o Ã½ kiáº¿n tá»« má»™t láº­p trÃ¬nh viÃªn, nhÃ¢n viÃªn quáº£n trá»‹ há»‡ thá»‘ng hoáº·c sá»­ dá»¥ng dá»‹ch vá»¥ cá»§a má»™t sá»‘ nhÃ  cung cáº¥p lá»›n nhÆ° [Amazon web service](https://aws.amazon.com/websites/), [Microsoft Azure](https://www.microsoft.com/en-us/CloudandHosting/Azure_Hosting.aspx), [Google cloud](https://cloud.google.com/),...

_[dev.vntechies.com](https://dev.vntechies.com/)_ Ä‘Æ°á»£c host trÃªn Amplify, sá»­ dá»¥ng CloudFront CDN ğŸ˜…

### 4. Cáº£i thiá»‡n tá»‘c Ä‘á»™ pháº£n há»“i cá»§a server

Google ráº¥t khÃ³ tÃ­nh, há» cho ráº±ng pháº£n há»“i cá»§a server nÃªn **dÆ°á»›i 200ms**. Viá»‡c server pháº£n há»“i cháº­m cÃ³ thá»ƒ do má»™t trong nhá»¯ng lÃ½ do sau:

- Sá»­ dá»¥ng framework, ngÃ´n ngá»¯ khÃ´ng tá»‘i Æ°u
- Logic quÃ¡ phá»©c táº¡p â†’ viá»‡c xá»­ lÃ½ cháº­m
- CÃ¡c components cá»§a server tá»‘n nhiá»u thá»i gian Ä‘á»ƒ liÃªn káº¿t (VD: sá»­ dá»¥ng web server vÃ  database á»Ÿ hai mÃ¡y chá»§ xa vá» máº·t Ä‘á»‹a lÃ½ â†’ máº¥t thÃªm Ä‘á»™ trá»… cá»§a network vÃ o thá»i gian pháº£n há»“i cá»§a webserver).
- Máº¡ng cháº­m (lÃ½ do khÃ¡ch quan, bá» tay tráº£ vá»).

**CÃ¡ch kháº¯c phá»¥c**

- Low level:
  - Sá»­ dá»¥ng cÃ¡c ngÃ´n ngá»¯, framework cÃ³ tá»‘c Ä‘á»™ xá»­ lÃ½ tá»‘t (khÃ´ng dÃ¹ng fortran Ä‘á»ƒ code web).
  - ÄÆ¡n giáº£n hoÃ¡ code, sá»­ dá»¥ng kiáº¿n thá»©c vá» cáº¥u trÃºc dá»¯ liá»‡u, giáº£i thuáº­t ğŸ˜…
  - Vá»›i website cÃ³ thá»ƒ dÃ¹ng cache (redis, memcached), cache trong database Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ pháº£n há»“i (tá»‘i Æ°u cache memory láº¡i lÃ  má»™t cÃ¢u chuyá»‡n khÃ¡c)
- High level:
  - XÃ¢y dá»±ng há»‡ thá»‘ng vá»›i Ä‘á»™ trá»… giá»¯a cÃ¡c clusters tháº¥p â†’ viá»‡c cá»§a quáº£n trá»‹ viÃªn há»‡ thá»‘ng.

### 5. Tá»‘i giáº£n hoÃ¡ cÃ¡c tÃ i nguyÃªn

Khi load trang web, cÃ¡c file `html, css, js, script` sáº½ Ä‘Æ°á»£c load Ä‘á»ƒ hiá»ƒn thá»‹ trÃªn browser. Tuy khÃ´ng quÃ¡ náº·ng nhÆ°ng viá»‡c Ä‘Æ¡n giáº£n hoÃ¡, khÃ´ng sá»­ dá»¥ng thá»«a code trong cÃ¡c tÃ i nguyÃªn Ä‘Æ°á»£c load cÅ©ng sáº½ cáº£i thiá»‡n tá»‘c Ä‘á»™ load cho trang web.

**CÃ¡ch kháº¯c phá»¥c**

- [Minify HTML](https://github.com/kangax/html-minifier)
- [Minify CSS](https://github.com/ben-eb/cssnano)
- [Minify Javascript](https://github.com/mishoo/UglifyJS2)
- CÃ³ thá»ƒ cÃ i [PageSpeed Module](https://developers.google.com/speed/pagespeed/module/) cá»§a google cho webserver (apache, nginx) vÃ  má»i thá»© cá»© Ä‘á»ƒ module lo.
- Há»c sá»­ dá»¥ng [gulp](https://gulpjs.com/) vÃ  viáº¿t gulp task cho viá»‡c minify tÃ i nguyÃªn (worth it).

### 6. Tá»‘i Æ°u hiá»ƒn thá»‹ áº£nh

áº¢nh cÃ³ thá»ƒ coi lÃ  tÃ i nguyÃªn chiáº¿m nhiá»u load-time nháº¥t cá»§a má»™t trang web, viá»‡c tá»‘i Æ°u Ä‘Æ°á»£c hiá»ƒn thá»‹ áº£nh Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c cáº£i thiá»‡n load-time cá»§a má»™t trang web.

NgÃ y nay ngÆ°á»i dÃ¹ng sá»­ dá»¥ng ráº¥t nhiá»u cÃ¡c thiáº¿t bá»‹ khÃ¡c nhau Ä‘á»ƒ cÃ³ thá»ƒ truy cáº­p vÃ o trang web cá»§a báº¡n. Vá»›i layout báº¡n cÃ³ thá»ƒ giáº£i quyáº¿t báº±ng responsive design, cÃ²n vá»›i áº£nh cÃ¢u chuyá»‡n sáº½ ráº¯c rá»‘i hÆ¡n má»™t chÃºt.

**CÃ¡ch kháº¯c phá»¥c**

- Sá»­ dá»¥ng áº£nh phÃ¹ há»£p vá»›i kÃ­ch cá»¡ mÃ n hÃ¬nh ngÆ°á»i dÃ¹ng. Tham kháº£o [cÃ¡c best practices](https://developers.google.com/web/fundamentals/design-and-ux/responsive/images) cho viá»‡c hiá»ƒn thá»‹ áº£nh responsive Ä‘á»ƒ tiáº¿t kiá»‡m tÃ i nguyÃªn.
- Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c nÃ©n áº£nh phÃ¹ há»£p:
  - GIF, PNG lÃ  phÆ°Æ¡ng thá»©c nÃ©n lossless, áº£nh sau khi nÃ©n sáº½ cÃ³ cháº¥t lÆ°á»£ng gáº§n nhÆ° áº£nh gá»‘c, tá»‰ lá»‡ nÃ©n tháº¥p.
  - JPEG lÃ  phÆ°Æ¡ng thá»©c nÃ©n lossy, áº£nh sau khi nÃ©n cÃ³ cháº¥t lÆ°á»£ng giáº£m so vá»›i áº£nh gá»‘c tuy nhiÃªn tá»‰ lá»‡ nÃ©n cÃ³ thá»ƒ **gáº¥p 10 láº§n** GIF vÃ  PNG.
  - Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c nÃ©n hiá»‡n Ä‘áº¡i hÆ¡n nhÆ° JPEG 2000, JPEG XR hoáº·c WebP Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ load.

### 7. Tá»‘i Æ°u hoÃ¡ viá»‡c load CSS

Má»™t trang web sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ khi load Ä‘áº§y Ä‘á»§ html, css, js. Náº¿u file css, js cÃ³ kÃ­ch thÆ°á»›c quÃ¡ lá»›n sáº½ khiáº¿n trang web bá»‹ render-blocking, khiáº¿n tá»‘c Ä‘á»™ load trang tÄƒng Ä‘Ã¡ng ká»ƒ.

**CÃ¡ch kháº¯c phá»¥c**

- [Inline cÃ¡c file css hoáº·c js nhá»](https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery#example) báº±ng tháº» `<style>` trong pháº§n `<head>`. CÃ¡c code nÃ y sáº½ Ä‘Æ°á»£c load cÃ¹ng html thay vÃ¬ pháº£i load tá»«ng file nhá». ps: khai bÃ¡o á»Ÿ Ä‘áº§u trang chá»© khÃ´ng pháº£i khai bÃ¡o trong html tag (`<p style=...>`) nhÃ© ğŸ˜…
- NÃªn nhá»› ráº±ng viá»‡c chia css, javascript thÃ nh cÃ¡c file nhá» sáº½ giÃºp project cÃ³ cáº¥u trÃºc code tá»‘t hÆ¡n, tuy nhiÃªn vá»›i má»—i file, browser sáº½ tá»‘n thÃªm 1 request Ä‘áº¿n server cá»§a báº¡n, Ä‘Ã´i khi tháº¥y Ä‘á»c code tháº¥y css hay script inline thÃ¬ Ä‘á»«ng vá»™i chá»­i dev ngu nhÃ© ğŸ˜…

### 8. Tá»• chá»©c thá»© tá»± load

Trong Lighthouse audits cá»§a Chrome, tá»‘c Ä‘á»™ hiá»ƒn thá»‹ first page cá»§a trang web lÃ  má»™t trong nhÆ°ng tiÃªu chÃ­ Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ ráº¥t cao trong má»¥c Performance. Äá»ƒ ngÆ°á»i dÃ¹ng cÃ³ tráº£i nghiá»‡m tá»‘t nháº¥t thÃ¬ viá»‡c Æ°u tiÃªn hiá»ƒn thá»‹ nhá»¯ng ná»™i dung cÆ¡ báº£n (above-the-fold - ATF) cá»§a trang web lÃ  ráº¥t quan trá»ng.

**CÃ¡ch kháº¯c phá»¥c**

- HÃ£y tá»• chá»©c html tháº­t tá»‘t, quyáº¿t Ä‘á»‹nh Ä‘Ã¢u lÃ  thÃ nh pháº§n quan trá»ng cáº§n load trÆ°á»›c (html load theo thá»© tá»± tá»« trÃªn xuá»‘ng dÆ°á»›i)
  - Chia css thÃ nh 2 pháº§n, 1 pháº§n inline dÃ nh cho cÃ¡c ná»™i dung Æ°u tiÃªn hiá»ƒn thá»‹ Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ load, 1 pháº§n dÃ nh cho cÃ¡c ná»™i dung cÃ²n láº¡i
  - Náº¿u sidebar vÃ  ná»™i dung cÃ¹ng Ä‘áº·t song song, Æ°u tiÃªn hiá»ƒn thá»‹ ná»™i dung trÆ°á»›c khi hiá»ƒn thá»‹ sidebar
- Giáº£m lÆ°á»£ng tÃ i nguyÃªn cáº§n load xuá»‘ng báº±ng cÃ¡ch:
  - Minify tÃ i nguyÃªn
  - Sá»­ dá»¥ng css thay cho áº£nh khi cÃ³ thá»ƒ
  - Sá»­ dá»¥ng nÃ©n
- [Sá»­ dá»¥ng lazy load](https://github.com/verlok/lazyload) cho cÃ¡c tÃ i nguyÃªn chÆ°a cáº§n Ä‘Æ°á»£c hiá»ƒn thá»‹ (vd: cÃ¡c áº£nh chÆ°a cÃ³ trong khung hÃ¬nh)

### 9. XoÃ¡ bá» cÃ¡c Javascript gÃ¢y ra render-blocking

Trong khi browser táº¡o ra cÃ¡c DOM tree, náº¿u gáº·p má»™t script, nÃ³ sáº½ dá»«ng láº¡i vÃ  thá»±c hiá»‡n xong script Ä‘Ã³ rá»“i má»›i tiáº¿p tá»¥c táº¡o ra cÃ¡c DOM. ChÃ­nh vÃ¬ tháº¿ javascript cÃ³ thá»ƒ coi lÃ  má»™t nguyÃªn nhÃ¢n khiáº¿n tá»‘c Ä‘á»™ táº£i trang bá»‹ cháº­m Ä‘i ráº¥t nhiá»u.

**CÃ¡ch kháº¯c phá»¥c**

- Inline script giá»‘ng nhÆ° Ä‘Ã£ lÃ m vá»›i css, tuy nhiÃªn hÃ£y cháº¯c cháº¯n Ä‘Æ°á»£c cÃ¡c script Ä‘Æ°á»£c inline cÃ³ tá»‘c Ä‘á»™ thá»±c hiá»‡n nhanh vÃ  khÃ´ng gÃ¢y ra render-blocking.
- Sá»­ dá»¥ng asynchronous (khÃ´ng Ä‘á»“ng bá»™) cho javascript, khi gáº·p script, browser sáº½ khÃ´ng dá»«ng láº¡i thá»±c hiá»‡n mÃ  sáº½ tiáº¿p tá»¥c parse HTML Ä‘á»“ng thá»i thá»±c hiá»‡n script â†’ trÃ¡nh bá»‹ render-blocking.
- Máº¡nh hÆ¡n ná»¯a chÃºng ta cÃ³ thá»ƒ [defer javascript](https://www.w3schools.com/tags/att_script_defer.asp), cÃ¡c script sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n khi trang Ä‘Æ°á»£c load xong
- CÆ¡ cháº¿ load javascript:
  - Náº¿u cÃ³ async: script sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n song song vá»›i parse html.
  - Náº¿u cÃ³ defer: script sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n sau khi parse html.
  - Náº¿u khÃ´ng cÃ³: script sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n ngay, sau Ä‘Ã³ má»›i tiáº¿p tá»¥c parse html.

### 10. Háº¡n cháº¿ redirect táº¡i landing page

Viá»‡c redirect ngÆ°á»i dÃ¹ng táº¡i landing page sáº½ Ä‘em láº¡i tráº£i nghiá»‡m xáº¥u vÃ  tÄƒng thá»i gian load time cá»§a trang/
VÃ­ dá»¥:

- example.com sá»­ dá»¥ng thiáº¿t káº¿ responsive khÃ´ng Ä‘Ã²i há»i redirect, nhanh vÃ  tá»‘i Æ°u.
- example.com â†’ m.example.com/home - sáº½ tá»‘n thá»i gian cho multi-roundtrip.
- example.com â†’ www.example.com â†’ m.example.com - ngÆ°á»i dÃ¹ng mobile sáº½ cÃ³ tráº£i nghiá»‡m ráº¥t tá»‡ do load time quÃ¡ lÃ¢u.

**CÃ¡c kháº¯c phá»¥c**

- Há»c cÃ¡ch thiáº¿t káº¿ má»™t giao diá»‡n responsive vÃ  háº¡n cháº¿ viá»‡c redirect.
- Náº¿u buá»™c pháº£i redirect, tham kháº£o [hÆ°á»›ng dáº«n cá»§a google](https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls#automatic-redirection).

## Loáº¡i 4: Server â†’ User

### 11. Sá»­ dá»¥ng nÃ©n dá»¯ liá»‡u

Háº§u háº¿t cÃ¡c browser hiá»‡nt táº¡i Ä‘á»u há»— trá»£ vÃ  sá»­ dá»¥ng gzip cho viá»‡c nÃ©n dá»¯ liá»‡u, nhá» lÆ°á»£ng dá»¯ liá»‡u truyá»n táº£i qua network Ã­t Ä‘i â†’ tÄƒng tá»‘c Ä‘á»™ táº£i trang.

**CÃ¡ch kháº¯c phá»¥c**

- Config server cho phÃ©p dá»¯ liá»‡u Ä‘Æ°á»£c nÃ©m nháº±m giáº£m, má»™t sá»‘ config máº«u cho cÃ¡c web server:

  - Apache: Use [mod_deflate](http://httpd.apache.org/docs/current/mod/mod_deflate.html)
  - Nginx: Use [ngx_http_gzip_module](http://nginx.org/en/docs/http/ngx_http_gzip_module.html)

- Dá»¯ liá»‡u Ä‘Æ°á»£c nÃ©n

![](/static/images/assets/GQvLVDg6nXC9Bri9.png)

### 12. Táº­n dá»¥ng bá»™ nhá»› cache cá»§a browser

Má»—i láº§n ngÆ°á»i dÃ¹ng truy cáº­p má»™t trang nÃ o Ä‘Ã³, toÃ n bá»™ tÃ i nguyÃªn cá»§a trang sáº½ Ä‘Æ°á»£c load. Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  náº¿u trang web cá»§a báº¡n khÃ´ng sá»­ dá»¥ng cache, má»—i láº§n load trang sáº½ load láº¡i toÃ n bá»™ cÃ¡c file css, script dÃ¹ nÃ³ cÃ³ thá»ƒ giá»‘ng y há»‡t trang trÆ°á»›c Ä‘Ã³ â†’ tÄƒng load-time.

CÃ¡c browser Ä‘á»u cÃ³ bá»™ nhá»› cache nÃªn hÃ£y táº­n dá»¥ng nÃ³ Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ load trang cá»§a báº¡n, nhÆ°ng tuyá»‡t Ä‘á»‘i khÃ´ng [dÃ¹ng mÃ¡y cá»§a khÃ¡ch Ä‘á»ƒ Ä‘Ã o bitcoin](https://coinhive.com/).

**CÃ¡ch kháº¯c phá»¥c**

- [Sá»­ dá»¥ng Cache-Control vÃ  ETags Ä‘á»ƒ thiáº¿t láº­p cache-policy](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching#cache-control) cho trang web cá»§a báº¡n.
- Sá»­ dá»¥ng [service-worker trong progressive web app](https://qmau.me/blog/post/progressive-web-apps-qmau-me-cho-ios) Ä‘á»ƒ precache tÃ i nguyÃªn trong láº§n load Ä‘áº§u tiÃªn.

## Refs

- [Google pagespeed](https://developers.google.com/speed/docs/insights/v4/reference/)
- [Speed up your website](https://www.crazyegg.com/blog/speed-up-your-website/)
- [Google webspeed](https://developers.google.com/speed/)
- [Sá»­ dá»¥ng CDN Ä‘á»ƒ giáº£m táº£i cho Server](https://viblo.asia/p/su-dung-cdn-de-giam-tai-cho-server-ymwGXOxoM4p1)
- [Find out how you stack up to new industry benchmarks for mobile page speed](https://www.thinkwithgoogle.com/marketing-resources/data-measurement/mobile-page-speed-new-industry-benchmarks/)
