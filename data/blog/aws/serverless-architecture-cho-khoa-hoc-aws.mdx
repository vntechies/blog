---
title: 'ğŸš€ XÃ¢y dá»±ng ná»n táº£ng Ä‘Äƒng kÃ­ há»c táº­p vá»›i chi phÃ­ chÆ°a Ä‘áº¿n 10 bÃ¡t phá»Ÿ ğŸœ vá»›i AWS Serverless'
date: '2025-07-28'
tags: ['aws', 'serverless', 'architecture', 'lambda', 'api-gateway', 'sqs', 'crm', 'education']
draft: false
authors: ['hungran']
images: ['/static/images/ogps/aws-serverless.jpg']
summary: 'ğŸ” KhÃ¡m phÃ¡ kiáº¿n trÃºc serverless AWS Ä‘Æ°á»£c xÃ¢y dá»±ng cho ná»n táº£ng Ä‘Äƒng kÃ½ khÃ³a há»c VNTechies, tá»« API Gateway Ä‘áº¿n Lambda vÃ  SQS, táº¡o ná»n táº£ng há»c táº­p hoÃ n toÃ n trÃªn cloud vá»›i chi phÃ­ tá»‘i thiá»ƒu'
---

Sau má»™t thá»i gian dÃ i im áº¯ng, Ä‘á»™i ngÅ© admin táº¡i Vntechies hiá»‡n Ä‘ang cá»‘ gáº¯ng mang láº¡i nhá»¯ng tráº£i nghiá»‡m tá»‘t nháº¥t cho cá»™ng Ä‘á»“ng DevOps & Cloud táº¡i Viá»‡t Nam. HÃ´m nay bá»n mÃ¬nh muá»‘n chia sáº» vá»›i cÃ¡c báº¡n vá» má»™t pháº§n trong chiáº¿n dá»‹ch Ä‘em láº¡i cho anh chá»‹- **ná»n táº£ng há»c táº­p AWS hoÃ n toÃ n trÃªn cloud**.

ÄÃ¢y khÃ´ng chá»‰ lÃ  má»™t bÃ i viáº¿t ká»¹ thuáº­t thÃ´ng thÆ°á»ng, mÃ  lÃ  cÃ¢u chuyá»‡n vá» cÃ¡ch mÃ¬nh vÃ  team anh trai IT táº¡i VNTechies Ä‘ang cá»‘ gáº¯ng táº¡o ra má»™t **mÃ´i trÆ°á»ng há»c táº­p thá»±c táº¿** cho cÃ¡c báº¡n - nÆ¡i mÃ  lÃ½ thuyáº¿t vÃ  thá»±c hÃ nh Ä‘Æ°á»£c káº¿t há»£p má»™t cÃ¡ch hoÃ n háº£o.

## ğŸ¯ TL;DR

## ğŸ¤” Táº¡i sao chÃºng ta cáº§n Serverless Architecture?

![AWS](/static/images/ogps/aws-serverless.jpg)

### âš ï¸ Váº¥n Ä‘á»

Ban Ä‘áº§u há»‡ thá»‘ng Ä‘Äƒng kÃ½ khÃ³a há»c cá»§a VNTechies chá»‰ Ä‘Æ¡n giáº£n lÃ  dÃ¹ng Google Sheets lÃ m backend. NÃ³ khÃ´ng tá»‡ vÃ¬ nÃ³ Ä‘Æ¡n giáº£n vÃ  dá»… sá»­ dá»¥ng, nhÆ°ng khi sá»‘ lÆ°á»£ng anh chá»‹ em quan tÃ¢m tÄƒng lÃªn, mÃ¬nh nháº­n ra cÃ³ nhá»¯ng háº¡n cháº¿ ráº¥t lá»›n:

- **ğŸ“ˆ KhÃ´ng cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng**: Khi sá»‘ lÆ°á»£ng há»c viÃªn tÄƒng, khÃ³ cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tuá»³ biáº¿n
- **ğŸ”’ Thiáº¿u tÃ­nh báº£o máº­t**: Dá»¯ liá»‡u nháº¡y cáº£m cá»§a cÃ¡c báº¡n khÃ´ng Ä‘Æ°á»£c mÃ£ hÃ³a Ä‘Ãºng cÃ¡ch
- **ğŸ“Š KhÃ´ng cÃ³ monitoring**: Bá»n mÃ¬nh khÃ´ng biáº¿t Ä‘Æ°á»£c há»‡ thá»‘ng cÃ³ hoáº¡t Ä‘á»™ng tá»‘t khÃ´ng
- **ğŸ”— KhÃ´ng thá»ƒ tÃ­ch há»£p**: KhÃ³ káº¿t ná»‘i vá»›i cÃ¡c há»‡ thá»‘ng CRM chuyÃªn nghiá»‡p

### âœ… Giáº£i phÃ¡p Serverless

Váº­y lÃ  mÃ¬nh vÃ  team quyáº¿t Ä‘á»‹nh xÃ¢y dá»±ng má»™t kiáº¿n trÃºc serverless hoÃ n toÃ n trÃªn Cloud vÃ  Ä‘áº·c biá»‡t lÃ  AWS.

## ğŸ—ï¸ Kiáº¿n trÃºc Serverless hoÃ n chá»‰nh

### ğŸ“Š Tá»•ng quan Kiáº¿n trÃºc

| ThÃ nh pháº§n           | Dá»‹ch vá»¥                                                             | Má»¥c Ä‘Ã­ch             | TÃ­nh nÄƒng                                     |
| -------------------- | ------------------------------------------------------------------- | -------------------- | --------------------------------------------- |
| ğŸŒ **Frontend**      | Nextjs CÅ©ng lÃ  Cloud nhÆ°ng mÃ  mÃ u Cam ğŸ˜…                            | Giao diá»‡n ngÆ°á»i dÃ¹ng | ğŸ“± Responsive, ğŸ“ Form Ä‘Äƒng kÃ½, âœ… Validation |
| ğŸšª **API Gateway**   | AWS API Gateway                                                     | Cá»•ng vÃ o há»‡ thá»‘ng    | ğŸ›¡ï¸ Rate Limiting, ğŸ” XÃ¡c thá»±c, ğŸ“Š Ghi log     |
| ğŸ“¬ **Message Queue** | AWS SQS                                                             | Bá»™ Ä‘á»‡m tin nháº¯n      | ğŸ’¾ LÆ°u trá»¯ an toÃ n, ğŸ”„ Tá»± Ä‘á»™ng scale          |
| âš¡ **Xá»­ lÃ½**         | AWS Lambda                                                          | Logic nghiá»‡p vá»¥      | ğŸ§  Serverless, ğŸ“§ Gá»­i email, ğŸ”— TÃ­ch há»£p CRM  |
| ğŸ¢ **CRM System**    | 3rd Party CRM - CÅ©ng lÃ  Cloud nhÆ°ng cho bá»n mÃ¬nh giá»¯ lÃ m bÃ­ máº­t nha | Quáº£n lÃ½ khÃ¡ch hÃ ng   | ğŸ‘¥ Táº¡o lead, ğŸ“Š Quáº£n lÃ½ dá»¯ liá»‡u               |

![Serverless Architecture for AWS Courses](/static/images/ogps/vntechies-registration-white-background.png)

### ğŸ”„ Luá»“ng xá»­ lÃ½ dá»¯ liá»‡u

1. **ğŸ“ Nháº­p liá»‡u** â†’ NgÆ°á»i dÃ¹ng Ä‘iá»n form Ä‘Äƒng kÃ½ trÃªn Next.js
2. **ğŸ›¡ï¸ Kiá»ƒm tra** â†’ API Gateway validate vÃ  giá»›i háº¡n tá»‘c Ä‘á»™ request
3. **ğŸ’¾ LÆ°u trá»¯** â†’ SQS lÆ°u tin nháº¯n an toÃ n vá»›i mÃ£ hÃ³a
4. **ğŸ§  Xá»­ lÃ½** â†’ Lambda xá»­ lÃ½ logic nghiá»‡p vá»¥ vÃ  tÃ­ch há»£p CRM
5. **ğŸ“Š Táº¡o lead** â†’ Há»‡ thá»‘ng CRM táº¡o vÃ  quáº£n lÃ½ leads

### ğŸ¯ Lá»£i Ã­ch chÃ­nh

- **ğŸ›¡ï¸ Báº£o máº­t**: Rate limiting, mÃ£ hÃ³a, IAM roles
- **ğŸ“ˆ Kháº£ nÄƒng má»Ÿ rá»™ng**: Tá»± Ä‘á»™ng scale theo nhu cáº§u
- **ğŸ’° Tiáº¿t kiá»‡m chi phÃ­**: Chá»‰ tráº£ tiá»n khi sá»­ dá»¥ng
- **ğŸ”„ Äá»™ tin cáº­y**: Dead letter queues, cÆ¡ cháº¿ retry
- **ğŸ“Š GiÃ¡m sÃ¡t**: CloudWatch logs vÃ  metrics

Rá»“i sau Ä‘Ã¢y chÃºng ta Ä‘i vÃ o chi tiáº¿t hÆ¡n nhÃ©.

### 1. ğŸšª API Gateway - Cá»•ng vÃ o cá»§a há»‡ thá»‘ng

API Gateway Ä‘Ã³ng vai trÃ² lÃ  **cá»•ng vÃ o duy nháº¥t** cho táº¥t cáº£ cÃ¡c request Ä‘Äƒng kÃ½ khÃ³a há»c:

```
# Rate Limiting Configuration
ThrottlingBurstLimit: 5
ThrottlingRateLimit: 5
```

**ğŸ›¡ï¸ Táº¡i sao cáº§n Rate Limiting?**

- ğŸ›¡ï¸ Báº£o vá»‡ há»‡ thá»‘ng khá»i spam vÃ  táº¥n cÃ´ng
- âš–ï¸ Äáº£m báº£o tÃ i nguyÃªn Ä‘Æ°á»£c phÃ¢n bá»• cÃ´ng báº±ng
- ğŸ’° Giáº£m chi phÃ­ váº­n hÃ nh

### 2. ğŸ“¬ SQS Queue - Xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™

SQS (Simple Queue Service) Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c **decoupling** cÃ¡c thÃ nh pháº§n:

```
// Gá»­i message Ä‘áº¿n SQS
const sqsParams = {
  QueueUrl: process.env.COURSE_REGISTRATION_QUEUE_URL,
  MessageBody: JSON.stringify(registrationData),
  MessageAttributes: {
    source: { DataType: 'String', StringValue: 'website' },
    course: { DataType: 'String', StringValue: course }
  }
}
```

**ğŸ¯ Lá»£i Ã­ch cá»§a SQS:**

- **ğŸ›¡ï¸ Reliability**: Message Ä‘Æ°á»£c lÆ°u trá»¯ an toÃ n
- **ğŸ“ˆ Scalability**: Tá»± Ä‘á»™ng scale theo táº£i
- **ğŸ”„ Fault Tolerance**: Dead Letter Queue cho failed messages

### 3. âš¡ Lambda Function - Xá»­ lÃ½ business logic

Lambda function xá»­ lÃ½ viá»‡c táº¡o lead trong CRM:

```
// Authenticate vá»›i crm
const sessionId = await authenticateWithCRM()

// Táº¡o CRM lead
const leadId = await createCRMLead(sessionId, registrationData)
```

**ğŸ¤” Táº¡i sao chá»n Lambda?**

- **â˜ï¸ Serverless**: KhÃ´ng cáº§n quáº£n lÃ½ server
- **ğŸ“ˆ Auto-scaling**: Tá»± Ä‘á»™ng scale theo demand
- **ğŸ’° Cost-effective**: Chá»‰ tráº£ tiá»n khi sá»­ dá»¥ng

## ğŸ”„ Dual Submission System

Äá»ƒ Ä‘áº£m báº£o Ä‘á»™ tin cáº­y, chÃºng ta implement **dual submission system**:

```
// Gá»­i Ä‘áº¿n cáº£ hai há»‡ thá»‘ng
const [serverlessResponse, googleResponse] = await Promise.allSettled([
  serverlessPromise,  // AWS Serverless
  googlePromise       // Google Apps Script
])
```

**ğŸ¯ Lá»£i Ã­ch:**

- **ğŸ”„ Redundancy**: Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u á»Ÿ hai nÆ¡i
- **ğŸ›¡ï¸ Reliability**: Náº¿u má»™t há»‡ thá»‘ng fail, há»‡ thá»‘ng khÃ¡c váº«n hoáº¡t Ä‘á»™ng
- **ğŸ’¾ Backup**: Google Sheets lÃ m backup cho 3rd Party CRM

## ğŸ—ï¸ Infrastructure as Code vá»›i SAM

ToÃ n bá»™ infrastructure Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng code:

```
# SAM Template
AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Resources:
  CourseRegistrationQueue:
    Type: AWS::SQS::Queue
    Properties:
      QueueName: course-registration-queue
      VisibilityTimeout: 60
      RedrivePolicy:
        deadLetterTargetArn: !GetAtt CourseRegistrationDLQ.Arn
        maxReceiveCount: 3
```

**ğŸ¯ Lá»£i Ã­ch cá»§a IaC:**

- **ğŸ“ Version Control**: Infrastructure Ä‘Æ°á»£c track trong Git
- **ğŸ”„ Reproducibility**: CÃ³ thá»ƒ deploy láº¡i chÃ­nh xÃ¡c
- **ğŸ‘¥ Collaboration**: Team cÃ³ thá»ƒ review vÃ  contribute

## ğŸ“Š Monitoring vÃ  Observability

### ğŸ“ˆ CloudWatch Metrics

ChÃºng ta monitor cÃ¡c metrics quan trá»ng:

- **ğŸšª API Gateway**: Request count, latency, error rate
- **ğŸ“¬ SQS**: Message count, age, DLQ metrics
- **âš¡ Lambda**: Invocation count, duration, error rate

### ğŸ“ Logging Strategy

```
// Structured logging
console.log('Processing registration:', {
  messageId: record.messageId,
  course: registrationData.course,
  timestamp: new Date().toISOString()
})
```

## ğŸ”’ Security Best Practices

### 1. ğŸ” IAM Roles vá»›i Least Privilege

```
Policies:
  - Version: '2012-10-17'
    Statement:
      - Effect: Allow
        Action:
          - sqs:SendMessage
        Resource: !GetAtt CourseRegistrationQueue.Arn
```

### 2. ğŸ”§ Environment Variables

```
Environment:
  Variables:
    VNTECHIES_KEY: TUYETVOI
    ...
```

### 3. ğŸ›¡ï¸ Rate Limiting

```
MethodSettings:
  - ResourcePath: "/*"
    HttpMethod: "*"
    ThrottlingBurstLimit: 5
    ThrottlingRateLimit: 5
```

## ğŸ’° Chi phÃ­ vÃ  Optimization

### ğŸ’µ Cost Breakdown

| Service        | Monthly Cost (estimated)                                       |
| -------------- | -------------------------------------------------------------- |
| ğŸšª API Gateway | $1-5                                                           |
| âš¡ Lambda      | $0.50-2                                                        |
| ğŸ“¬ SQS         | $0.40-1                                                        |
| ğŸ“Š CloudWatch  | $1-3                                                           |
| **ğŸ’° Total**   | **$3-11** tÆ°Æ¡ng Ä‘Æ°Æ¡ng chÆ°a Ä‘áº¿n 500k VND táº¡i thá»i Ä‘iá»ƒm hiá»‡n táº¡i |

## ğŸ¯ Káº¿t luáº­n

ThÃ´ng qua viá»‡c sá»­ dá»¥ng cÃ¡c AWS services trong thá»±c táº¿, bá»n mÃ¬nh mong muá»‘n cÃ¡c báº¡n sáº½:

1. **ğŸ§  Hiá»ƒu sÃ¢u** vá» cÃ¡c AWS services - khÃ´ng chá»‰ lÃ  lÃ½ thuyáº¿t
2. **ğŸ› ï¸ Thá»±c hÃ nh** vá»›i real-world scenarios - nhÆ° trong cÃ´ng viá»‡c thá»±c táº¿
3. **ğŸ“š Há»c** best practices vÃ  security - tá»« nhá»¯ng gÃ¬ bá»n Ä‘Ã£ tráº£i nghiá»‡m

**Háº¹n gáº·p láº¡i anh chá»‹ em trong cÃ¡c bÃ i viáº¿t tiáº¿p theo!**

---

**TÃ i liá»‡u tham kháº£o:**

- [AWS Serverless Application Model (SAM)](https://docs.aws.amazon.com/serverless-application-model/)
- [API Gateway Rate Limiting](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html)
- [SQS Best Practices](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-best-practices.html)
- [Lambda Error Handling](https://docs.aws.amazon.com/lambda/latest/dg/error-handling.html)
