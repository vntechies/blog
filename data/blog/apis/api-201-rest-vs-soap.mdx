---
title: API 201 - REST vs SOAP
date: '2020-11-11'
tags: ['api', 'soap', 'rest api']
series: ['api']
draft: false
images: ['/static/images/ogps/api201.png']
summary: 'X√¢y d·ª±ng web service theo chu·∫©n RESTful c√≥ ph·∫£i l√† gi·∫£i ph√°p t·ªët nh·∫•t cho c√°c h·ªá th·ªëng?'
---

<TOCInline toc={props.toc} asDisclosure />

Ti·∫øp t·ª•c [b√†i vi·∫øt tr∆∞·ªõc](/blog/apis/api-101-rest-restful-api), li·ªáu `REST` c√≥ v∆∞·ª£t tr·ªôi so v·ªõi `SOAP` theo nh∆∞ √Ω ki·∫øn c·ªßa t√°c gi·∫£ d∆∞·ªõi ƒë√¢y?

![](/static/images/assets/6ev5KY9okH2FmRd1.jpg)

Trong b√†i vi·∫øt n√†y m√¨nh s·∫Ω so s√°nh tr·ª±c ti·∫øp `REST` v√† `SOAP` ƒë·ªÉ c√°c b·∫°n c√≥ th·ªÉ t·ª± t√¨m ra ƒë∆∞·ª£c c√¢u tr·∫£ l·ªùi c·ªßa ri√™ng m√¨nh.

_ps: b·∫°n n√†o ch∆∞a r√µ v·ªÅ SOAP c√≥ th·ªÉ ƒë·ªçc th√™m ·ªü [ƒë√¢y](https://vi.wikipedia.org/wiki/SOAP)._

# ∆Øu ƒëi·ªÉm

![](/static/images/assets/29472802_10213888263114999_1471996776805302272_o.jpg)

1. `REST`

   - `REST` th√≠ch ·ª©ng t·ªët v·ªõi c√°c c√¥ng ngh·ªá web m·ªõi, d·ªÖ d√†ng s·ª≠ d·ª•ng v√† b·∫£o tr√¨.
   - T√°ch bi·ªát r√µ r√†ng gi·ªØa server v√† client, ch·ªâ giao ti·∫øp th√¥ng qua c√°c ph∆∞∆°ng th·ª©c `HTTP` v√† `URI` (ƒë·ªçc l·∫°i b√†i vi·∫øt [REST 101](/blog/apis/api-101-rest-restful-api).
   - C√°c th√¥ng tin c√≥ th·ªÉ ƒë∆∞·ª£c l∆∞u l·∫°i ph√≠a client ‚Üí tr√°nh ph·∫£i g·ªçi ƒë·∫øn resource nhi·ªÅu l·∫ßn.
   - C√≥ th·ªÉ s·ª≠ d·ª•ng b·∫•t k·ª≥ c·∫•u tr√∫c n√†o (`XML`, `JSON`, ho·∫∑c c·∫•u tr√∫c do server v√† client quy ∆∞·ªõc v·ªõi nhau).

2. `SOAP`

   - Tu√¢n theo c√°ch x·ª≠ l√Ω trong h·ªá th·ªëng c·ªßa c√°c doanh nghi·ªáp l·ªõn.
   - ƒê∆∞·ª£c th·ª±c hi·ªán ·ªü t·∫ßng tr√™n c·ªßa c√°c giao th·ª©c giao ti·∫øp, c·∫£ v·ªõi c√°c giao th·ª©c kh√¥ng ƒë·ªìng b·ªô, kh√¥ng b·∫Øt bu·ªôc ph·∫£i l√† `HTTP`.
   - C√°c th√¥ng tin c·ªßa ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c giao ti·∫øp v·ªõi kh√°ch h√†ng.
   - B·∫£o m·∫≠t v√† x√°c th·ª±c lu√¥n ƒë∆∞·ª£c ƒë·∫£m b·∫£o trong giao th·ª©c (nh·ªù stateful).
   - C√≥ th·ªÉ ƒë∆∞·ª£c mi√™u t·∫£ b·∫±ng `WSDL`.

# Nh∆∞·ª£c ƒëi·ªÉm

![](/static/images/assets/29472578_10213888610963695_2986071309554810880_n.jpg)

1. `REST`

- Ch·ªâ ho·∫°t ƒë·ªông tr√™n c√°c giao th·ª©c `HTTP`.
- Vi·ªác b·∫£o m·∫≠t v√† x√°c th·ª±c c√≥ th·ªÉ kh√¥ng ƒë·∫£m b·∫£o b·∫±ng `SOAP` (stateless).

2. `SOAP`

- Vi·ªác duy tr√¨ tr·∫°ng th√°i (stateful) khi·∫øn ti√™u t·ªën t√†i nguy√™n cho c√°c metadata.
- Kh√≥ s·ª≠ d·ª•ng v√† kh√¥ng ph·ªï bi·∫øn b·∫±ng `REST` trong c√°c ·ª©ng d·ª•ng web hay mobile th√¥ng th∆∞·ªùng.
- Ch·ªâ s·ª≠ d·ª•ng `XML`.

C√≥ th·ªÉ th·∫•y r√µ ƒë∆∞·ª£c `REST` nh∆∞ m·ªôt c·∫≠u thanh ni√™n m·ªõi l·ªõn, m·∫°nh m·∫Ω, nhanh nh·∫πn v√† th√≠ch ·ª©ng nhanh. `SOAP` th√¨ nh∆∞ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng ·ªü tu·ªïi trung ni√™n, ch·∫Øc ch·∫Øn v√† v·ªØng ch√£i tuy c√≥ ch·∫≠m ch·∫°p v√† t·ªën th·ªùi gian h∆°n. **Nh∆∞ng li·ªáu c√≥ ph·∫£i t·∫•t c·∫£ ph·ª• n·ªØ ƒë·ªÅu th√≠ch m·ªôt c·∫≠u trai m·ªõi l·ªõn?**

![](/static/images/assets/29473101_10213888611443707_4940117047951491072_n.jpg)

Kh√¥ng ai d√πng `javascript` ƒë·ªÉ l·∫≠p tr√¨nh h·ªá th·ªëng ƒëi·ªÅu khi·ªÉn nh√† m√°y ƒëi·ªán h·∫°t nh√¢n hay d√πng `fortran` ƒë·ªÉ l·∫≠p tr√¨nh web. Kh√¥ng ph·∫£i t·ª± nhi√™n m√† c√°c ph∆∞∆°ng th·ª©c c≈©ng nh∆∞ ng√¥n ng·ªØ ƒë∆∞·ª£c ra ƒë·ªùi, vi·ªác c√°i g√¨ t·ªët h∆°n s·∫Ω ƒë∆∞·ª£c quy·∫øt ƒë·ªãnh trong nh·ªØng ho√†n c·∫£nh c·ª• th·ªÉ kh√°c nhau. V·ªõi nh·ªØng t√≠nh ch·∫•t ƒë·∫∑c bi·ªát c·ªßa 2 c√°ch x·ª≠ l√Ω n√†y s·∫Ω c√≥ nh·ªØng use cases m·ªôt c√°ch s·∫Ω v∆∞·ª£t tr·ªôi h∆°n c√°ch c√≤n l·∫°i.

1. `REST`: Vi·ªác g·∫ßn g≈©i v·ªõi c√¥ng ngh·ªá web hi·ªán ƒë·∫°i, d·ªÖ h·ªçc, nhanh ch√≥ng v√† ƒë∆°n gi·∫£n gi√∫p `REST` ∆∞u vi·ªát h∆°n trong c√°c ·ª©ng d·ª•ng h∆∞·ªõng t√†i nguy√™n (resources), thi√™n v·ªÅ c√°c `CRUD` actions v·ªõi m√¥ h√¨nh point-to-point (client-server):

- M·∫°ng x√£ h·ªôi (twitter API)
- Blog c√° nh√¢n (qmau.me)
- ƒê·ªçc v√† g·ª≠i d·ªØ li·ªáu.
- Kh√¥ng ƒë√≤i h·ªèi t√≠nh b·∫£o m·∫≠t qu√° cao.

2. `SOAP`: C√≥ th·ªÉ s·ª≠ d·ª•ng v·ªõi m·ªçi ph∆∞∆°ng th·ª©c giao ti·∫øp (kh√¥ng ch·ªâ `HTTP` nh∆∞ `REST`), ƒë∆∞·ª£c chu·∫©n ho√° v√† ph·ª• h·ª£p v·ªõi c√°c h·ªá th·ªëng l·ªõn, ph·ª©c t·∫°p, ƒë√≤i h·ªèi t√≠nh b·∫£o m·∫≠t cao:

- D·ªãch v·ª• t√†i ch√≠nh (Paypal API)
- Thanh to√°n tr·ª±c tuy·∫øn (Saleforce API)
- Vi·ªÖn th√¥ng (Clickatell SMS API)

C√°c b·∫°n c√≥ th·ªÉ ƒë√°nh gi√° ƒë·ªô ph·ª©c t·∫°p qua v√≠ d·ª• m·ªôt API l·∫•y th√¥ng tin c·ªßa phim t√¨nh c·∫£m.

#### `REST`

- Request: (`HTTP` methods + endpoint) ‚Üí c√≥ th·ªÉ cache v√¨ c√≥ uniform interface

```
 GET  http://phimtinhcam.com/movies/69
```

- Response:

```json
{
  title: Phim t√¨nh c·∫£m
  actress: Moria azawo
}
```

#### `SOAP`: SOAP s·ª≠ d·ª•ng HTTP method POST ‚Üí kh√¥ng th·ªÉ cache

- Request:

```xml
<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
  <Body>
  <getMovieDetailsRequest xmlns="http://phimtinhcam.com/movies">
    <id>69</id>
  </getMovieDetailsRequest>
  </Body>
</Envelope>
```

- Response:

```xml
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
<ns2:getMovieDetailsResponse xmlns:ns2="http://phimtinhcam.com/movies">
    <ns2:movie>
        <ns2:id>69</ns2:id>
        <ns2:name>Phim t√¨nh c·∫£m</ns2:name>
        <ns2:actress>Moria azawo</ns2:actress>
    </ns2:movie>
</ns2:getMovieDetailsResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>
```

# T·∫°i sao SOAP ƒë∆∞·ª£c s·ª≠ d·ª•ng?

1. **WS-Security:** `SOAP` v√† `REST` ƒë·ªÅu h·ªó tr·ª£ `SSL` (point-to-point sercurity) nh∆∞ v·ªõi `SOAP` c√≥ h·ªó tr·ª£ th√™m m·ªôt s·ªë t√≠nh nƒÉng enterprise security v√† ƒë∆∞·ª£c chu·∫©n ho√° ‚Üí h·ªó tr·ª£ ƒë·ªãnh danh, b·∫£o m·∫≠t qua c√°c b√™n trung gian, b·∫£o ƒë·∫£m an to√†n, s·ª± to√†n v·∫πn v√† t√≠nh tin c·∫≠y c·ªßa th√¥ng ƒëi·ªáp.
2. **WS-AtomicTransaction:** C√°c giao d·ªãch [ACID](https://en.wikipedia.org/wiki/ACID) v·ªõi WebService c·∫ßn s·ª≠ d·ª•ng `SOAP`. `REST` c√≥ h·ªó tr·ª£ transactions nh∆∞ng n√≥ kh√¥ng ph√π h·ª£p v·ªõi c√°c giao d·ªãch ACID. `REST` b·ªã h·∫°n ch·∫ø r·∫•t l·ªõn b·ªüi ch·ªâ s·ª≠ d·ª•ng `HTTP`, kh√≥ s·ª≠ d·ª•ng trong c√°c h·ªá th·ªëng ph√¢n t√°n y√™u c·∫ßu [2 phase-commit protocol](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).V·ªõi c√°c d·ªãch v·ª• t√†i ch√≠nh, ng√¢n h√†ng hay ƒë√≤i h·ªèi t√≠nh tin c·∫≠y v√† s·ª± to√†n v·∫πn d·ªØ li·ªáu, ƒëi·ªÅu n√†y l√† b·∫Øt bu·ªôc.
3. **WS-ReliableMessaging:** `REST` kh√¥ng c√≥ h·ªá th·ªëng x·ª≠ l√Ω l·ªói chu·∫©n v√† mu·ªën kh√°ch h√†ng gi·∫£i quy·∫øt c√°c l·ªói giao ti·∫øp b·∫±ng c√°ch retry... ƒê√¢y ch·∫Øc ch·∫Øn kh√¥ng ph·∫£i l√† c√°ch x·ª≠ l√Ω hay khi giao d·ªãch ng√¢n h√†ng. `SOAP` c√≥ h·ªá th·ªëng x·ª≠ l√Ω l·ªói v√† th·∫≠m ch√≠ cung c·∫•p qua c√°c trung gian c·ªßa h·ªá th·ªëng.

S·ª± v∆∞·ª£t tr·ªôi c·ªßa c√°c ·ª©ng d·ª•ng `RESTful` so v·ªõi `SOAP` c√≥ l·∫Ω g·∫ßn gi·ªëng v·ªõi vi·ªác `JSON` ƒë√£ v∆∞·ª£t qua `XML` trong ƒë·ªãnh d·∫°ng v√† m√¥ t·∫£ d·ªØ li·ªáu. Trong th·ªùi ƒë·∫°i c√°c micro services l√™n ng√¥i th√¨ t√≠nh nhanh ch√≥ng, g·ªçn nh·∫π v√† t·ªëc ƒë·ªô cao ƒë∆∞·ª£c ƒë·∫∑t l√™n h√†ng ƒë·∫ßu. ƒêi·ªÅu n√†y gi·∫£i th√≠ch v√¨ sao trong c√°c ·ª©ng d·ª•ng th√¥ng th∆∞·ªùng v√† ph·∫ßn l·ªõn c√°c h·ªá th·ªëng hi·ªán nay v·∫´n ƒëang s·ª≠ d·ª•ng `RESTful APIs` v√† c√°c l·∫≠p tr√¨nh vi√™n (bao g·ªìm c·∫£ m√¨nh) ƒë·ªÅu √≠t bi·∫øt v·ªÅ s·ª± t·ªìn t·∫°i c·ªßa `SOAP`. Tuy nhi√™n, `SOAP` kh√¥ng bi·∫øn m·∫•t v√¨ n√≥ v·∫´n r·∫•t c·∫ßn thi·∫øt, n·∫øu b·∫°n c√≥ √Ω ƒë·ªãnh l√†m v·ªÅ t√†i ch√≠nh ho·∫∑c vi·ªÖn th√¥ng, h√£y c·ªë g·∫Øng d√†nh th·ªùi gian t√¨m hi·ªÉu v√† n·∫Øm ch·∫Øc n√≥.

M√¨nh v·∫´n lu√¥n c·ªë g·∫Øng vi·∫øt b√†i theo c√°ch tr√¨nh b√†y c√°c √Ω t∆∞·ªüng v√† kh√¥ng ƒë·ªãnh h∆∞·ªõng suy nghƒ© c·ªßa m·ªçi ng∆∞·ªùi theo √Ω nghƒ© c·ªßa b·∫£n th√¢n (v√¨ ch·∫Øc ch·∫Øn suy nghƒ© c·ªßa m√¨nh nhi·ªÅu khi kh√¥ng ch√≠nh x√°c). Hi v·ªçng r·∫±ng b√†i vi·∫øt n√†y s·∫Ω gi√∫p c√°c b·∫°n c√≥ c√¢u tr·∫£ l·ªùi c·ªßa ri√™ng m√¨nh cho c√¢u h·ªèi tr√™n.

Cu·ªëi c√πng th√¨ li·ªáu c√≤n anh ch√†ng n√†o tr·∫ª trung h∆°n c·∫£ `REST`? M·∫°nh m·∫Ω v√† ƒë∆°n gi·∫£n h∆°n kh√¥ng? C√¢u tr·∫£ l·ªùi s·∫Ω c√≥ ·ªü ph·∫ßn 3 v√† c√≥ l·∫Ω l√† b√†i vi·∫øt cu·ªëi trong series v·ªÅ `REST` c·ªßa m√¨nh. See ya!

Hope you are having a `RESTful` weekend.

## VNTechies Dev Blog

Kho t√†i nguy√™n m√£ ngu·ªìn m·ªü v·ªõi s·ª© m·ªánh ƒë√†o t·∫°o ki·∫øn th·ª©c, ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp cho c·ªông ƒë·ªìng Cloud ‚òÅÔ∏è DevOps üöÄ

[![Facebook page](https://i.imgur.com/YxfhUTS.png)](https://www.facebook.com/vntechies)

Tham gia group [VNTechies - Cloud ‚òÅÔ∏è / DevOps üöÄ](https://www.facebook.com/groups/acevntechies) n·∫øu b·∫°n mu·ªën giao l∆∞u v·ªõi c·ªông ƒë·ªìng v√† c·∫≠p nh·∫≠t c√°c th√¥ng tin m·ªõi nh·∫•t v·ªÅ Cloud v√† DevOps.

- Website: https://vntechies.dev
- Github repository: https://github.com/vntechies
- Facebook page: https://facebook.com/vntechies

[![Discord banner](https://images.viblo.asia/c8c4a473-c08d-45a3-be57-821781c1c256.png)](https://discord.com/invite/k2uDgd7NZ4)

Anh ch·ªã em h√£y follow/·ªßng h·ªô VNTechies ƒë·ªÉ c·∫≠p nh·∫≠t nh·ªØng th√¥ng tin m·ªõi nh·∫•t v·ªÅ Cloud v√† DevOps nh√©!
