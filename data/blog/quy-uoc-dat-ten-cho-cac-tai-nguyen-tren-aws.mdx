---
title: Quy Æ°á»›c Ä‘áº·t tÃªn cho cÃ¡c tÃ i nguyÃªn trÃªn AWS
date: '2021-01-14'
tags: ['devtips', 'cloud', 'aws', 'devops']
draft: false
authors: ['mau']
images: ['/static/images/ogps/aws-naming-convension.png']
summary: 'Quy Æ°á»›c Ä‘áº·t tÃªn, gáº¯n tag tÃ i nguyÃªn trÃªn AWS theo cÃ¡c best practices Ä‘á»ƒ thuáº­n tiá»‡n cho viá»‡c quáº£n lÃ½, váº­n hÃ nh há»‡ thá»‘ng xÃ¢y dá»±ng trÃªn AWS'
---

<TOCInline toc={props.toc} asDisclosure />

## TL,DR

- TrÃ¬nh bÃ y vá» quy Æ°á»›c Ä‘áº·t tÃªn, gáº¯n tag tÃ i nguyÃªn trÃªn AWS theo cÃ¡c best practices Ä‘á»ƒ thuáº­n tiá»‡n cho viá»‡c quáº£n lÃ½, váº­n hÃ nh.
- Cung cáº¥p báº£ng quy Æ°á»›c Ä‘áº·t tÃªn Ä‘á»ƒ tham kháº£o.

## Táº¡i sao cáº§n quy chuáº©n Ä‘áº·t tÃªn, gáº¯n tag?

![Báº¡n Ä‘Ã£ bao giá» gáº·p pháº£i tÃ¬nh tráº¡ng nÃ y? - Â©ï¸ dev.classmethod.com](/static/images/assets/name-bef.png)

> The sad reality is that we humans are forgetful creatures.
>
> **- Essentialism: The Disciplined Pursuit of Less**

Nhá»¯ng lÃ½ do cáº§n cÃ³ má»™t quy chuáº©n Ä‘áº·t tÃªn:

- TÃªn cÃ¡c resourse khÃ³ phÃ¢n biá»‡t
  - Con ngÆ°á»i nhanh quÃªn, báº¡n khÃ´ng muá»‘n má»™t dá»± Ã¡n Ä‘ang triá»ƒn khai cÃ³ 10 EC2 instances cÃ¹ng 1 tÃªn lÃ  **webserver** hoáº·c tá»‡ hÆ¡n lÃ  khÃ´ng cÃ³ tÃªn
  - TÄƒng kháº£ nÄƒng máº¯c lá»—i khi váº­n hÃ nh. Do dá»… nháº§m láº«n cÃ¡c tÃ i nguyÃªn vá»›i nhau (VD: xoÃ¡ nháº§m mÃ¡y chá»§ á»Ÿ mÃ´i trÆ°á»ng production thay vÃ¬ cÃ¡c mÃ´i trÆ°á»ng khÃ¡c,...)
- Ãp dá»¥ng quy chuáº©n Ä‘áº·t tÃªn giÃºp cÃ¡c tÃ i nguyÃªn Ä‘Æ°á»£c tá»• chá»©c vÃ  quáº£n lÃ½ tá»‘t hÆ¡n, giÃºp viá»‡c váº­n hÃ nh, truy váº¿t trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n
- TÃªn vÃ  tag cÃ³ thá»ƒ sá»­ dá»¥ng trong AWS Cost and Usage Report Ä‘á»ƒ quáº£n lÃ½ vá» chi phÃ­ hoáº·c thá»‘ng kÃª cÃ¡c tÃ i nguyÃªn<br/><br/>

ChÃ­nh vÃ¬ váº­y, khÃ´ng chá»‰ cÃ¡c doanh nghiá»‡p lá»›n vá»›i há»‡ thá»‘ng phá»©c táº¡p trÃªn AWS mÃ  cÃ¡c cÃ¡ nhÃ¢n, dá»± Ã¡n nhá» cÅ©ng nÃªn Ã¡p dá»¥ng nhá»¯ng quy chuáº©n Ä‘áº·t tÃªn (naming convention) cho cÃ¡c tÃ i nguyÃªn dá»‹ch vá»¥ trÃªn AWS. Ká»ƒ cÃ¡c khi cÃ¡c tÃ i nguyÃªn Ä‘Æ°á»£c quáº£n lÃ½ báº±ng cÃ¡c tÃ i khoáº£n AWS riÃªng biá»‡t, báº¡n cÅ©ng nÃªn Ä‘áº·t tÃªn vÃ  tag Ä‘áº§y Ä‘á»§ cho tÃ i nguyÃªn. Äiá»u nÃ y nháº±m háº¡n cháº¿ tá»‘i Ä‘a nhá»¯ng sai sÃ³t trong quÃ¡ trÃ¬nh váº­n hÃ nh há»‡ thá»‘ng.

NÃ³ lÃ  má»™t thÃ³i quen tá»‘t, máº¥t Ã­t thá»i gian Ä‘á»ƒ thá»±c hiá»‡n nhÆ°ng giÃºp tÄƒng hiá»‡u quáº£ lÃ m viá»‡c.

## CÃ¡c quy Æ°á»›c Ä‘áº·t tÃªn, gáº¯n tag

ThÃ´ng thÆ°á»ng sáº½ cÃ³ 3 quy chuáº©n Ä‘áº·t tÃªn: camelCase, snake_case vÃ  kebab-case. Trong trÆ°á»ng há»£p nÃ y, chÃºng ta nÃªn dÃ¹ng kebab-case.

LÃ½ do ráº¥t Ä‘Æ¡n giáº£n, tÃªn cá»§a S3 bucket khÃ´ng Ä‘Æ°á»£c chá»©a chá»¯ hoa (UPPERCASE) vÃ  dáº§u gáº¡ch dÆ°á»›i a.k.a shift trá»« (\_)

â†’ Äá»ƒ tÄƒng tÃ­nh nháº¥t quÃ¡n giá»¯a cÃ¡c tÃ i nguyÃªn, **kebab-case lÃ  lá»±a chá»n tá»‘t nháº¥t**

### Quy Æ°á»›c gáº¯n tag

- AWS tags cÃ³ phÃ¢n biá»‡t chá»¯ hoa vá»›i chá»¯ thÆ°á»ng (case sensitive) â†’ hÃ£y Ä‘áº£m báº£o tÃ­nh thá»‘ng nháº¥t cá»§a viá»‡c Ä‘áº·t tÃªn (VD: **CostCenter** vÃ  **costcenter** sáº½ khÃ¡c nhau)
- Tag **Name** Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»ƒ hiá»‡n tÃªn gá»i cá»§a nhiá»u tÃ i nguyÃªn (VD: EC2), tag **name** thÃ¬ khÃ´ng
- CÃ¡c tag Ä‘Æ°á»£c AWS táº¡o tá»± Ä‘á»™ng theo cÃ¡c quy Æ°á»›c sau:

  1. Chá»‰ sá»­ dá»¥ng chá»¯ thÆ°á»ng (lowercase)
  2. Sá»­ dá»¥ng dáº¥u gáº¡ch ngang ("-") Ä‘á»ƒ thay cho khoáº£ng tráº¯ng, phÃ¢n tÃ¡ch cÃ¡c tá»« (kebab-case)
  3. CÃ¡c tiá»n tá»‘ (prefixes) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»ƒ hiá»‡n tÃ i nguyÃªn gá»‘c cá»§a cÃ¡c tag

- VÃ­ dá»¥:
  - **aws:cloudformation:stack-name** Ä‘á»‹nh danh CloudFormation stack Ä‘Ã£ táº¡o tÃ i nguyÃªn
  - **lambda-console:blueprint** Ä‘á»‹nh danh blueprint Ä‘Æ°á»£c dÃ¹ng cho Lambda funtion
  - **elasticbeanstalk:environment-name** Ä‘á»‹nh danh á»©ng dá»¥ng (application) Ä‘Ã£ táº¡o ra tÃ i nguyÃªn

ChÃºng ta cÃ³ thá»ƒ Ã¡p dá»¥ng 3 quy Æ°á»›c máº·c Ä‘á»‹nh cá»§a AWS vÃ o viá»‡c gáº¯n tag vÃ  Ä‘áº·t tÃªn cÃ¡c tÃ i nguyÃªn.

- VÃ­ dá»¥:
  - **anycompany:cost-center** Ä‘á»ƒ Ä‘á»‹nh danh mÃ£ cost center ná»™i bá»™ cho viá»‡c quáº£n lÃ½ tÃ i chÃ­nh
  - **anycompany:environment-type** Ä‘á»ƒ Ä‘á»‹nh danh mÃ´i trÆ°á»ng (development, test hoáº·c production) cá»§a tÃ i nguyÃªn
  - **anycompany:application-id** Ä‘á»ƒ Ä‘á»‹nh danh á»©ng dá»¥ng (application) Ä‘Ã£ táº¡o tÃ i nguyÃªn

### Quy Æ°á»›c Ä‘áº·t tÃªn

#### ThÃ´ng tin cáº§n thiáº¿t

Ta cáº§n biáº¿t nhá»¯ng thÃ´ng tin sau qua tÃªn cá»§a tÃ i nguyÃªn:

- **TÃªn há»‡ thá»‘ng, á»©ng dá»¥ng** (sysname)
  - Äá»‹nh danh thá»‘ng nháº¥t cá»§a há»‡ thá»‘ng, á»©ng dá»¥ng Ä‘Ã£ táº¡o tÃ i nguyÃªn (VD: xxxsystem)
- **MÃ´i trÆ°á»ng** (env)
  - Production, test, development (prod/stg/dev)
- **Layer máº¡ng** (nlayer)
  - Public, protected, private (public/protected/private)
- **Loáº¡i** (type)
  - Application, Bastion, Mail (app/bastion/mail)
- **Má»¥c Ä‘Ã­ch** (use)
  - DÃ¹ng Ä‘á»ƒ lÆ°u trá»¯, quáº£n lÃ½ log, phÃ¢n phá»‘i ná»™i dung (log/contents)

Äá»ƒ phÃ¢n tÃ¡ch cÃ¡c pháº§n thÃ´ng tin trong tÃªn ta cÃ³ thá»ƒ chá»n giáº£i phÃ¡p dÃ¹ng dáº¥u gáº¡ch ngang (-)

Ãp dá»¥ng thÃªm 3 quy Æ°á»›c cá»§a viá»‡c Ä‘áº·t tag ta cÃ³ báº£ng sau

#### Báº£ng quy Æ°á»›c Ä‘áº·t tÃªn

| TÃ i nguyÃªn      | Quy Æ°á»›c Ä‘áº·t tÃªn                           | Ghi chÃº                                                                       |
| --------------- | ----------------------------------------- | ----------------------------------------------------------------------------- |
| VPC             | \{sysname\}-\{env\}-vpc                   |                                                                               |
| Subnet          | \{sysname\}-\{env\}-\{nlayer\}.subnetXX   | XX cÃ³ thá»ƒ lÃ  code cá»§a AZ                                                      |
| RouteTable      | \{sysname\}-\{env\}-\{nlayer\}.rtb        |                                                                               |
| InternetGateway | \{sysname\}-\{env\}-igw                   |                                                                               |
| ELB             | \{sysname\}-\{env\}-alb/clb/nlb           | Vá»›i ELB ná»™i bá»™ (internal load balancer), hÃ£y bá»• sung má»¥c Ä‘Ã­ch \{use\} vÃ o tÃªn |
| TargetGroup     | \{sysname\}-\{env\}-tg                    | tÆ°Æ¡ng tá»± nhÆ° á»Ÿ trÃªn                                                           |
| EC2             | \{sysname\}-\{env\}-\{type\}XX            | XX cÃ³ thá»ƒ lÃ  sá»‘ thá»© tá»±                                                        |
| IAMRole         | \{sysname\}-\{env\}-\{type\}-role         |                                                                               |
| SecurityGroup   | \{sysname\}-\{env\}-\{type\}-sg           |                                                                               |
| RDS             | \{sysname\}-\{env\}-rds                   |                                                                               |
| S3              | \{sysname\}-\{env\}-\{use\}-\{AccountID\} | VÃ¬ S3 giá»‘ng tÃªn miá»n nÃªn cáº§n thÃªm account id                                  |

## Káº¿t luáº­n

Há»‡ thá»‘ng váº«n sáº½ hoáº¡t Ä‘á»™ng tá»‘t náº¿u báº¡n khÃ´ng Ã¡p dá»¥ng quy Æ°á»›c Ä‘áº·t tÃªn hoáº·c gáº¯n tags. NhÆ°ng khi cÃ³ sá»± cá»‘ phÃ¡t sinh hoáº·c yÃªu cáº§u má»›i xuáº¥t hiá»‡n, báº¡n sáº½ máº¥t nhiá»u thá»i gian Ä‘á»ƒ cÃ³ thá»ƒ tÃ¬m kiáº¿m vÃ  kháº¯c phá»¥c.

Äá»ƒ trÃ¡nh rÆ¡i vÃ o hoÃ n cáº£nh Ä‘Ã³ hoáº·c Ä‘Æ¡n giáº£n lÃ  táº¡o ra má»™t mÃ´i trÆ°á»ng lÃ m viá»‡c Ä‘á»¡ Ä‘á»™c háº¡i hÆ¡n (cho báº£n thÃ¢n vÃ  Ä‘á»“ng nghiá»‡p), hÃ£y táº¡o thÃ³i quen ngÄƒn náº¯p, sáº¡ch sáº½ trÃªn khi sá»­ dá»¥ng cÃ¡c tÃ i nguyÃªn. CÃ³ thá»ƒ sáº½ máº¥t thá»i gian Ä‘á»ƒ lÃ m quen, nhÆ°ng nÃ³ Ä‘Ã¡ng vÃ  khÃ´ng cáº§n quÃ¡ nhiá»u ná»— lá»±c.

HÃ£y dÃ¹ng báº£ng quy Æ°á»›c á»Ÿ trÃªn vÃ  share hoáº·c Ä‘á»ƒ láº¡i comment táº¡i bÃ i viáº¿t náº¿u báº¡n tháº¥y cÃ³ Ã­ch!

Náº¿u cÃ³ báº¥t ká»³ khÃ³ khÄƒn, tháº¯c máº¯c vá» AWS, [hÃ£y liÃªn há»‡ vá»›i VNTechies Ä‘á»ƒ Ä‘Æ°á»£c trá»£ giÃºp](https://m.me/vntechies)

## Reference

- [Tagging Best Practices - AWS - Amazon.com](https://d1.awsstatic.com/whitepapers/aws-tagging-best-practices.pdf)
- [å¼Šç¤¾ã§ä½¿ã£ã¦ã„ã‚‹ AWS ãƒªã‚½ãƒ¼ã‚¹ã®å‘½åè¦å‰‡ã‚’ç´¹ä»‹ã—ã¾ã™ - dev.classmethod.com](https://dev.classmethod.jp/articles/aws-name-rule/)
- áº¢nh bÃ¬a: <span>Photo by <a href="https://unsplash.com/@mero_dnt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Chinh Le Duc</a> on <a href="https://unsplash.com/s/photos/vietnam-board?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>

## VNTechies Dev Blog

Kho tÃ i nguyÃªn mÃ£ nguá»“n má»Ÿ vá»›i sá»© má»‡nh Ä‘Ã o táº¡o kiáº¿n thá»©c, Ä‘á»‹nh hÆ°á»›ng nghá» nghiá»‡p cho cá»™ng Ä‘á»“ng Cloud â˜ï¸ DevOps ğŸš€

[![Facebook page](https://i.imgur.com/YxfhUTS.png)](https://www.facebook.com/vntechies)

Tham gia group [VNTechies - Cloud â˜ï¸ / DevOps ğŸš€](https://www.facebook.com/groups/acevntechies) náº¿u báº¡n muá»‘n giao lÆ°u vá»›i cá»™ng Ä‘á»“ng vÃ  cáº­p nháº­t cÃ¡c thÃ´ng tin má»›i nháº¥t vá» Cloud vÃ  DevOps.

- Website: https://vntechies.dev
- Github repository: https://github.com/vntechies
- Facebook page: https://facebook.com/vntechies

[![Discord banner](https://images.viblo.asia/c8c4a473-c08d-45a3-be57-821781c1c256.png)](https://discord.com/invite/k2uDgd7NZ4)

Anh chá»‹ em hÃ£y follow/á»§ng há»™ VNTechies Ä‘á»ƒ cáº­p nháº­t nhá»¯ng thÃ´ng tin má»›i nháº¥t vá» Cloud vÃ  DevOps nhÃ©!
