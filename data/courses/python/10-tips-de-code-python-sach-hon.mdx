---
title: '10 tips Ä‘á»ƒ code python sáº¡ch hÆ¡n'
draft: false
images: ['/static/images/ogps/10tipspython.png']
summary: 'CÃ¡c máº¹o nhá» giÃºp code Python sáº¡ch hÆ¡n sá»­ dá»¥ng cÃ¡c tÃ­nh nÄƒng tÃ­ch há»£p cá»§a ngÃ´n ngá»¯'
tags: ['devops', 'python', 'devtips']
date: '2022-10-25'
isFree: true
index: 1
---

_Python_ lÃ  má»™t trong nhá»¯ng ngÃ´n ngá»¯ phá»• biáº¿n nháº¥t trÃªn tháº¿ giá»›i. NÃ³ cÃ³ ráº¥t nhiá»u á»©ng dá»¥ng thá»±c táº¿ bao gá»“m phÃ¡t triá»ƒn web, á»©ng dá»¥ng dÃ nh cho mÃ¡y tÃ­nh Ä‘á»ƒ bÃ n, IoT, phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  há»c mÃ¡y. BÃ i viáº¿t nÃ y bao gá»“m mÆ°á»i máº¹o giÃºp mÃ£ cá»§a báº¡n trá»Ÿ nÃªn sáº¡ch vÃ  dá»… Ä‘á»c hÆ¡n.

## 1. Kiá»ƒm tra null

Má»™t viá»‡c chÃºng ta ráº¥t hay lÃ m lÃ  kiá»ƒm tra xem má»™t biáº¿n cÃ³ trá»‘ng khÃ´ng (hoáº·c null) trÆ°á»›c khi sá»­ dá»¥ng. Trong Python, _null_ Ä‘Æ°á»£c biá»ƒu thá»‹ báº±ng tá»« khÃ³a `None`. Hai Ä‘oáº¡n mÃ£ bÃªn dÆ°á»›i táº¡o ra káº¿t quáº£ giá»‘ng há»‡t nhau. sá»­ dá»¥ng tá»« khÃ³a `if` theo sau lÃ  tÃªn biáº¿n.

ğŸ’¡ _Bonus Tip_: Sá»­ dá»¥ng `f-strings` Ä‘á»ƒ Ä‘á»‹nh dáº¡ng chuá»—i. Báº¯t Ä‘áº§u chuá»—i f báº±ng cÃ¡ch nháº­p _f_ ngay trÆ°á»›c chuá»—i thÃ´ng thÆ°á»ng `(f"...")` vÃ  Ä‘áº·t cÃ¡c biáº¿n bÃªn trong dáº¥u ngoáº·c nhá»n, Python sáº½ Ä‘á»‹nh dáº¡ng káº¿t quáº£ thÃ nh má»™t chuá»—i chá»©a cÃ¡c biáº¿n.

```python:null_checks.py
# Kiá»ƒm tra null: PhiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - NÃªn trÃ¡nh "if x is not None" âŒ
n = 42
if n is not None:
    print(f"n tá»“n táº¡i vÃ  cÃ³ giÃ¡ trá»‹ {n}")

# PhiÃªn báº£n tá»‘t ğŸ: Sá»­ dá»¥ng if Ä‘Æ¡n giáº£n âœ…
if n:
    print(f"n tá»“n táº¡i vÃ  cÃ³ giÃ¡ trá»‹ {n}")
```

## 2. Kiá»ƒm tra pháº§n tá»­ trong 1 list

ChÃºng ta cáº§n kiá»ƒm tra xem danh sÃ¡ch `(L)` cÃ³ chá»©a giÃ¡ trá»‹ cá»§a má»™t biáº¿n cá»¥ thá»ƒ `(x)` hay khÃ´ng.
Má»™t cÃ¡ch Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y lÃ  sá»­ dá»¥ng vÃ²ng láº·p `for` Ä‘á»ƒ láº·p qua táº¥t cáº£ cÃ¡c pháº§n tá»­ vÃ  kiá»ƒm tra sá»± giá»‘ng nhau. Python cung cáº¥p má»™t shortcut ráº¥t há»¯u Ã­ch Ä‘Ã³ lÃ  sá»­ dá»¥ng tá»« khÃ³a `in`.

{/* {{< file "python" "" >}} */}

```python:contains.py
# Check if a value is contained in a list
L = ["JavaScript", "Python", "Ruby", "PHP", "Rust"]
x = "Rust"

# PhiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - Sá»­ dá»¥ng vÃ²ng láº·p for vÃ  check tá»«ng pháº§n tá»­ âŒ
for i in range(len(L)):
    if x == L[i]:
        print(f"{x} cÃ³ trong list")

# PhiÃªn báº£n tá»‘t ğŸ: Sá»­ dá»¥ng "if x in L" âœ…
if x in L:
    print(f"{x} cÃ³ trong list")
```

## 3. List Comprehensions

Má»™t xá»­ lÃ½ phá»• biáº¿n lÃ  táº¡o má»™t list trá»‘ng vÃ  append cÃ¡c giÃ¡ trá»‹ vÃ o Ä‘Ã³.
VÃ­ dá»¥: chÃºng ta muá»‘n má»™t list cÃ¡c sá»‘ bÃ¬nh phÆ°Æ¡ng trong má»™t pháº¡m vi nháº¥t Ä‘á»‹nh.
CÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y lÃ  xÃ¡c Ä‘á»‹nh danh sÃ¡chh vÃ  sá»­ dá»¥ng vÃ²ng láº·p `for` Ä‘á»ƒ duyá»‡t qua cÃ¡c giÃ¡ trá»‹ vÃ  append vÃ o má»™t list.

Python cung cáº¥p má»™t one-liner cho má»¥c Ä‘Ã­ch nÃ y, Ä‘Æ°á»£c gá»i lÃ  "list comprehension". Äá»ƒ viÃªt má»™t comprehension, báº¯t Ä‘áº§u vá»›i biá»ƒu thá»©c mÃ  báº¡n sá»­ dá»¥ng cho phÆ°Æ¡ng thá»©c append. Sau Ä‘Ã³, viáº¿t Ä‘iá»u kiá»‡n cho vÃ²ng láº·p `for` ngay sau biá»ƒu thá»©c Ä‘Ã³ vÃ  Ä‘áº·t má»i thá»© trong má»™t cáº·p dáº¥u ngoáº·c vuÃ´ng. Comprehensions cÃ³ thá»ƒ sá»­ dá»¥ng vá»›i dict, set vÃ  generators. Tuy nhiÃªn, hÃ£y cá»‘ gáº¯ng trÃ¡nh sá»­ dá»¥ng chÃºng vá»›i cÃ¡c biá»ƒu thá»©c phá»©c táº¡p. Viá»‡c code dá»… Ä‘á»c ráº¥t quan trá»ng.

```python:list_comprehension.py
# PhiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - Sá»­ dá»¥ng vÃ²ngg láº·p for vÃ  append âŒ
squares = []
for num in range(12):
    squares.append(num ** 2)

# PhiÃªn báº£n tá»‘t ğŸ: Sá»­ dá»¥ng list comprehension âœ…
squares = [num ** 2 for num in range(12)]

# Bonus Tip ğŸ’¡: Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng dictionary, set, and generator comprehensions
squares_dict = {num: num ** 2 for num in range(12)} # dictionary
squares_set = {num ** 2 for num in range(12)}       # set
squares_gen = (num ** 2 for num in range(12))       # generator
```

## 4. Sá»­ dá»¥ng Any/All

NÃ³i Ä‘áº¿n one-liner, Python cung cáº¥p má»™t vÃ i hÃ m tÃ­ch há»£p cÃ³ thá»ƒ kiá»ƒm tra má»™t Ä‘iá»u kiá»‡n Ä‘Ãºng vá»›i Ã­t nháº¥t _má»™t_ pháº§n tá»­ hoáº·c vá»›i _táº¥t cáº£_ cÃ¡c pháº§n tá»­ trong má»™t hÃ m láº·p. Äá»ƒ minh hoáº¡, chÃºng ta hÃ£y nghÄ© tá»›i má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n. ChÃºng ta muá»‘n láº¥y má»™t list cÃ¡c sá»‘ Ã¢m, cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y lÃ  viáº¿t má»™t hÃ m láº·p `for` vÃ  sá»­ dá»¥ng má»™t flag. CÃ¡ch tá»‘t hÆ¡n lÃ  sá»­ dá»¥ng hÃ m `any`.

```python:any.pyy
# Checking for negative values in a list
nums = [1, 2, 3, 4, 5, -42, 6, 7, 8]

# PhiÃªn báº£n khÃ´ng hiá»‡u quáº£ ğŸ¤” - Sá»­ dá»¥ng vÃ²ngg láº·p for vÃ  má»™t flag âŒ
contains_neg = False # flag
for num in nums:
    if num < 0:
        contains_neg = True

# PhiÃªn báº£n tá»‘t ğŸ - Sá»­ dá»¥ng hÃ m "any" Ä‘Æ°á»£c tÃ­ch há»£p âœ…
contains_neg = any(num < 0 for num in nums) # True

# Bonus Tip ğŸ’¡: Python cÅ©ng cÃ³ hÃ m "all" Ä‘Æ°á»£c tÃ­ch há»£p âœ…
contains_neg = not all(num >= 0 for num in nums) # True
```

- `any` - Tráº£ vá» True náº¿u Ä‘iá»u kiá»‡n Ä‘Ãºng vá»›i báº¥t ká»³ pháº§n tá»­ nÃ o trong khi duyá»‡t. Tráº£ vá» False náº¿u rá»—ng.
- `all` - Tráº£ vá» True náº¿u Ä‘iá»u kiá»‡n Ä‘Ãºng vá»›i táº¥t cáº£ cÃ¡c pháº§n tá»­ trong khi duyá»‡t (hoáº·c náº¿u rá»—ng).

## 5. Iterations

Python cung cáº¥p má»™t cÃº phÃ¡p ráº¥t gá»n mÃ  nhiá»u ngÆ°á»i thÆ°á»ng khÃ´ng Ä‘á»ƒ Ã½. VÃ­ dá»¥, khi duyá»‡t cÃ¡c giÃ¡ trá»‹ cá»§a má»™t list, pattern chung lÃ  sá»­ dá»¥ng má»™t vÃ²ng láº·p for vÃ  má»™t index. Náº¿u chÃºng ta chá»‰ quan tÃ¢m tá»›i giÃ¡ trá»‹ cá»§a cÃ¡c pháº§n tá»­, cÃ¡ch gá»n gÃ ng hÆ¡n lÃ  sá»­ dá»¥ng vÃ²ng láº·p `for` vÃ  duyá»‡t _trá»±c tiáº¿p_ cÃ¡c pháº§n tá»­ cá»§a list. Náº¿u chÃºng ta cáº§n sá»­ dá»¥ng index, cÃ¡ch gá»n nháº¥t lÃ  sá»­ dá»¥ng `enumerate`.

```python:iterations.py
# Iterating over a single list
L = ["a", "b", "c", "d"]

# phiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - sá»­ dá»¥ng index trong khoáº£ng âŒ
for i in range(len(L)):
    val = L[i]
    print(i, val)

# CÃ¡ch tá»‘t hÆ¡n ğŸ: Trá»±c tiáº¿p truy cáº­p cÃ¡c pháº§n tá»­ âœ…
for el in L:
    print(el)

# CÃ¡ch tá»‘t hÆ¡n ğŸ: Sá»­ dá»¥ng enumerate náº¿u báº¡n cáº§n dÃ¹ng cáº·p index, value âœ…
for i, val in enumerate(L):
    print(i, val)
```

ğŸ’¡ _Bonus Tip_: CÃ¡ch nÃ y cÅ©ng Ä‘Æ°á»£c Ã¡p dá»¥ng cho viá»‡c láº·p láº¡i nhiá»u list. ChÃºng ta cÃ³ duyá»‡ trá»±c tiáº¿p giÃ¡ trá»‹ trong 2 collections sá»­ dá»¥ng `zip`. Náº¿u cáº§n sá»­ dá»¥ng index, hÃ£y káº¿t há»£p `enumerate` vÃ  `zip`.

```python:iterations.py
# Bonus Tip ğŸ’¡:  Duyá»‡t nhiá»u list
A = ["a", "b", "c", "d"]
B = ["e", "f", "g", "h"]

# phiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - sá»­ dá»¥ng index trong khoáº£ng âŒ
for i in range(len(A)):
    va, vb = A[i], B[i]
    print(i, va, vb)

# CÃ¡ch tá»‘t hÆ¡n ğŸ: Sá»­ dá»¥ng zip Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cÃ¡c pháº§n tá»­ âœ…
for va, vb in zip(A, B):
    print(va, vb)

# CÃ¡ch tá»‘t hÆ¡n ğŸ: Káº¿t há»£p zip vÃ  enumerate Ä‘á»ƒ Ä‘á»ƒ láº¥y cáº·p index, value cá»§a cÃ¡c pháº§n tá»­ âœ…
for i, (va, vb) in enumerate(zip(A, B)):
    print(i, va, vb)
```

## 6. Láº¥y giÃ¡ trá»‹ tá»« Tuple

Má»™t viá»‡c há»¯u Ã­ch ná»¯a cáº§n biáº¿t lÃ  láº¥y giÃ¡ trá»‹ trá»±c tiáº¿p tá»« má»™t tuple. Má»™t cÃ¡ch lÃ m lÃ  láº¥y tá»«ng giÃ¡ trá»‹ sá»­ dá»¥ng index.
CÃ¡ch hiá»‡u quáº£ hÆ¡n lÃ  láº¥y trá»±c tiáº¿p tá»« tuple.

```python:existence.py
# Láº¥y giÃ¡ trá»‹ tá»« tuple
some_tuple = (1, 2, 3)

# PhiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - Láº¥y giÃ¡ trá»‹ theo index âŒ
x = some_tuple[0]
y = some_tuple[1]
z = some_tuple[2]


# PhiÃªn báº£n tá»‘t hÆ¡n ğŸ - Láº¥y trá»¥c tiáº¿p giÃ¡ trá»‹ tá»« tuple âœ…
x, y, z = some_tuple
```

## 7. ToÃ¡n tá»­ báº­c ba

Python sá»­ dá»¥ng `if/elif/else` Ä‘á»ƒ Ä‘iá»u khiá»ƒn luá»“ng. VÃ­ dá»¥: xem xÃ©t nhu cáº§u quyáº¿t Ä‘á»‹nh dáº¥u cá»§a má»™t biáº¿n dá»±a trÃªn giÃ¡ trá»‹ cá»§a nÃ³. CÃ¡ch dá»… nháº¥t lÃ  sá»­ dá»¥ng `if/else` Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh. Tuy nhiÃªn, cÃ³ má»™t cÃ¡ch gá»n gÃ ng hÆ¡n Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y lÃ  sá»­ dá»¥ng toÃ¡n tá»­ báº­c 3.

```python:ternary_operator.py
# GÃ¡n má»™t giÃ¡ trá»‹ dá»±a trÃªn Ä‘iá»u kiá»‡n
a = 42

# PhiÃªn báº£n cháº¥p nháº­n Ä‘Æ°á»£c ğŸ¤” - sá»§ dá»¥ng if/else âŒ
if a > 0:
    sign = "positive"
else:
    sign = "negative"

# PhiÃªn báº£n tá»‘t nháº¥t ğŸ - sá»­ dá»¥ng toÃ¡n tá»­ báº­c ba âœ…
sign = "positive" if (a > 0) else "negative" # dáº¥u ngoáº·c Ä‘Æ¡n khÃ´ng báº¯t buá»™c
```

## 8. Generators

[_Generators_](https://docs.python.org/3/howto/functional.html#generators) lÃ  má»™t cÃ´ng cá»¥ Ä‘á»ƒ tiáº¿t kiá»‡m bá»‘ nhá»› vÃ  cáº£i thiá»‡n hiá»‡u suáº¥t. NÃ³i chung, chÃºng _yield_ ra má»™t giÃ¡ trá»‹ táº¡i má»™t thá»i Ä‘iá»ƒn vÃ  cÃ³ thá»ƒ láº·p Ä‘i láº·p láº¡i nhiá»u láº§n. HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng ta Ä‘ang muá»‘n tÃ­nh tá»•ng cá»§a 42.000 sá»‘ tá»± nhiÃªn Ä‘áº§u tiÃªn, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng list comprehension Ä‘á»ƒ tÃ­nh cÃ¡c giÃ¡ trá»‹ báº±ng hÃ m `sum` Ä‘Æ°á»£c tÃ­ch há»£p sáºµn. Viá»‡c xÃ¢y dá»±ng má»™t list cáº§n 351064 bytes. Sá»­ dá»¥ng generator giáº£m giÃ¡ trá»‹ nÃ y xuá»‘ng cÃ²n 112 bytes. Äiá»u nÃ y thá»±c sá»± áº¥n tÆ°á»£ng.

```python:generators.py
from sys import getsizeof

# KhÃ´ng tá»‘i Æ°u bá»™ nhá»› ğŸ’©: Sá»­ dá»¥ng list âŒ
L = [n for n in range(42_000)]
sum(L) # 881979000
getsizeof(L) # 351064 bytes

# Tá»‘i Æ°u bá»™ nhá»› ğŸ”¥: Sá»­ dá»¥ng generator âœ…
G = (n for n in range(42_000))
sum(G) # 881979000
getsizeof(G) # 112 bytes
```

## 9. Äá»‘i sá»‘ máº·c Ä‘á»‹nh cÃ³ thá»ƒ thay Ä‘á»•i (Mutable Default Arguments)

Python há»— trá»£ cÃ¡c giÃ¡ trá»‹ máº·c Ä‘á»‹nh cho tham sá»‘ hÃ m. Náº¿u giÃ¡ trá»‹ cho tham sá»‘ khÃ´ng Ä‘Æ°á»£c truyá»n trong khi gá»i hÃ m, thÃ¬ giÃ¡ trá»‹ máº·c Ä‘á»‹nh sáº½ lÃ  giÃ¡ trá»‹ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh. Náº¿u giÃ¡ trá»‹ máº·c Ä‘á»‹nh thuá»™c loáº¡i cÃ³ thá»ƒ thay Ä‘á»•i, Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y ra má»™t sá»‘ trÆ°á»ng há»£p khÃ´ng tá»‘t. VÃ­ dá»¥, khi sá»­ dá»¥ng danh sÃ¡ch trá»‘ng lÃ m giÃ¡ trá»‹ máº·c Ä‘á»‹nh. Náº¿u danh sÃ¡ch Ä‘Æ°á»£c sá»­a Ä‘á»•i, giÃ¡ trá»‹ máº·c Ä‘á»‹nh cÅ©ng Ä‘Æ°á»£c sá»­a Ä‘á»•i theo. Trong háº§u háº¿t trÆ°á»ng há»£p, Ä‘iá»u nÃ y khÃ´ng Ä‘Æ°á»£c thá»±c hiá»‡n má»™t cÃ¡ch cá»‘ Ã½. Náº¿u khÃ´ng cÃ³ giÃ¡ trá»‹ Ä‘Æ°á»£c truyá»n trong khi gá»i hÃ m, chÃºng ta cÃ³ thá»ƒ Ä‘áº£m báº£o má»™t danh sÃ¡ch trá»‘ng Ä‘Æ°á»£c táº¡o.

```python:mutable_default_args.py
# Äá»‘i sá»‘ máº·c Ä‘á»‹nh cÃ³ thá»ƒ thay Ä‘á»•i ğŸ’©:  CÃ¡ch khÃ´ng Ä‘Ãºng  âŒ
def append_element(elem, L=[]):
    L.append(elem)
    return L

L1 = append_element(21) # [21]
L2 = append_element(42) # [21, 42] - ...


# CÃ¡ch Ä‘Ãºng ğŸ”¥: Sá»­ dá»¥ng None âœ…
def better_append(elem, L=None):
    if L is None:
        L = []
    L.append(elem)
    return L

L1 = better_append(21) # [21]
L2 = better_append(42) # [42]

```

## 10. Quáº£n lÃ½ nghá»¯ cáº£nh (Context Managers)

Máº¹o cuá»‘i cÃ¹ng lÃ  sá»­ dá»¥ng context manager Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng tÃ i nguyÃªn Ä‘Æ°á»£c Ä‘Ã³ng Ä‘Ãºng cÃ¡ch.
Trong trÆ°á»ng há»£p nÃ y, mÃ£ Ä‘Æ¡n giáº£n hÆ¡n váº«n sáº½ cháº¡y tá»‘t, tuy nhiÃªn, náº¿u náº¿u nÃ³ liÃªn quan Ä‘áº¿n logic phá»©c táº¡p hÆ¡n vÃ  má»™t ngoáº¡i lá»‡ xuáº¥t hiá»‡n trong quÃ¡ trÃ¬nh ghi, tá»‡p sáº½ khÃ´ng Ä‘Æ°á»£c Ä‘Ã³ng Ä‘Ãºng cÃ¡ch. Má»™t tÃ¬nh huá»‘ng phá»• biáº¿n hay sáº£y ra lÃ  quÃªn Ä‘Ã³ng tá»‡p. Context manager cáº£nh Ä‘áº£m báº£o tá»‡p sáº½ luÃ´n Ä‘Æ°á»£c Ä‘Ã³ng, báº¥t ká»ƒ cÃ³ ngoáº¡i lá»‡ nÃ o.

```python:context_managers.py
# Quáº£n lÃ½ tá»‡p - sá»­ dá»¥ng open vÃ  f.close() âŒ
f = open("file.txt", "w")
f.write("ChÃ o máº¹, con lÃªn TV nÃ y!")
f.close()

# PhiÃªn báº£n tá»‘t hÆ¡n ğŸ -  Sá»­ dá»¥ng context manager âœ…
with open("file.txt", "w") as f:
    f.write("ChÃ o máº¹, con lÃªn TV nÃ y!")
```

## Reference

- https://fireship.io/lessons/code-this-not-that-python-edition/
